webpackJsonp([1],{133:function(t,e){},134:function(t,e){},135:function(t,e){},137:function(t,e,n){function r(t){n(133)}var o=n(46)(n(74),n(139),r,"data-v-0df4abcc",null);t.exports=o.exports},138:function(t,e,n){function r(t){n(135)}var o=n(46)(n(75),n(141),r,"data-v-44d0497c",null);t.exports=o.exports},139:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table map_table_h"},[n("thead",[n("tr",t._l(t.keys,function(e){return n("th",[t._v(t._s(""+e))])}))]),t._v(" "),n("tbody",{attrs:{title:t.body_tooltip}},[n("tr",t._l(t.vals,function(e){return n("td",[t._v(t._s(""+e))])}))])])},staticRenderFns:[]}},140:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"app-innerframe"}},[n("router-view")],1)])},staticRenderFns:[]}},141:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mcbkt-panel"},[n("p",{staticClass:"explain_cluster"},[t._v(t._s(t.body_tooltip_cur_plus))]),t._v(" "),n("h1",[t._v(t._s(t._f("capitalize_all")(t.heading)))]),t._v(" "),n("h2",{staticClass:"curact"},[t._v("Current "+t._s(t._f("capitalize")(t.unit_activity_type)))]),t._v(" "),n("map_table_h",{attrs:{data:t.curitems,body_tooltip:t.body_tooltip_cur}}),t._v(" "),n("h2",{staticClass:"preact"},[t._v("Previous "+t._s(t._f("pluralize")(t._f("capitalize")(t.unit_activity_type))))]),t._v(" "),n("map_table_h",{attrs:{data:t.previtems}}),t._v(" "),n("h2",{staticClass:"allact"},[t._v("All "+t._s(t._f("pluralize")(t._f("capitalize")(t.unit_activity_type))))]),t._v(" "),n("map_table_h",{attrs:{data:t.allitems}})],1)},staticRenderFns:[]}},68:function(t,e,n){"use strict";/**
 * @file This module is for listening to log data generated by CODAP, do
 *    stuff on log data, and then possibly pushing the result back into CODAP
 *    log stream.
 *    <p><i>Thanks are due to Doug Martin and Jonathan Sandoe</i> for their
 *    code of DataflowGettingStarted data-interactive, which gave some
 *    initial guideline and some hints to the code of this file.</p>
 *
 * @copyright (c) 2017, Physics Front LLC (main@physicsfront.com)
 * @license <a href="https://www.apache.org/licenses/LICENSE-2.0">
 *    Apache License, Version 2.0</a> (also, see file NOTICE).
 * @author Sam Gweon (Sam@physicsfront.com)
 * @version 0.1.0
 * @module iframe-logdata-listener
 */
function r(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Real Time MCBKT",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if("string"!=typeof r)throw Error("** The value of title must be a string.");if(r=r.trim(),!r.length)throw Error("** The value of title cannot be an empty string.");if("function"!=typeof e)throw Error("** The value of logdata_callback must be a function.");var a=r+"--"+(new Date).getTime()+"--"+Math.round(1e10*Math.random()),s=a+"::",u=null,c={title:r,version:"0.1.0",preventBringToFront:!1,dimensions:{width:500,height:500}},l=function(){m(),w.disconnect()},d=function(t){return'Handler not implemented for action "'+t.action+'" for CODAP request with resource "'+t.resource+'".'},f=function(t){return'Handler not implemented for CODAP response to request "'+t.action+'" with resource "'+t.resource+'".'},p=function(t){var e=v[t];return void 0===e&&(e=function(){throw Error('No handler for CODAP request with resource "'+t+'".')}),e},h=function(t){var e=_[t];return void 0===e&&(e=function(){throw Error('No handler for CODAP response to request with resource "'+t+'".')}),e},v={interactiveState:function(t){switch(t.action){case"get":return c;default:throw Error(d(t))}},logMessageNotice:function(t){var n=t.values;switch(t.action){case"notify":return n.formatStr.startsWith(s)?o>=1&&console.log("== got boomeranged logdata: "+i()(n)):n.logMonitor&&a==n.logMonitor.clientId&&(delete n.logMonitor,n.iframe_logdata_client_id=a,n.time=.001*(new Date).getTime(),e(n,g)),{message:"logdatum was received"};default:throw Error(d(t))}}},_={interactiveFrame:function(t,e){switch(t.action){case"get":var r=e.values;return n.set_state(r),void(r.savedState&&n.set_state(r.savedState,!1));default:throw Error(f(t))}},logMessage:function(t){switch(t.action){case"notify":return void(o>=1&&console.log("log data were recevied well by CODAP---but only formatStr and replaceArgs, I think."));default:throw Error(f(t))}},logMessageMonitor:function(t){switch(t.action){case"register":return void(o>=1&&console.log("== got register data: "+i()(t.values)));default:throw Error(d(t))}}},m=function(){n.send_request_to_codap({action:"unregister",resource:"logMessageMonitor",values:{clientId:a}})},g=function(t){void 0==t.formatStr&&(t.formatStr=r+" report"),o>=1&&console.log("== pushing logdata to CODAP: "+i()(t)),n.send_request_to_codap({action:"notify",resource:"logMessage",values:t})};this.handle_codap_request=function(t,e){o>=1&&console.log("== handle_codap_request: "+i()(t));var n=!1,r=null;try{r=p(t.resource)(t),n=!0}catch(t){console.log("** _get_codap_request_handler failed: "+t.message)}e({success:n,values:r})},this.handle_codap_response=function(t,e){if(o>=1&&console.log("== handle_codap_response: "+i()(e)),u=e,e)if(Array.isArray(e)){if(!Array.isArray(t))throw Error("Type mismatch between request (non-Array) and response (Array).");if(e.length!=t.length)throw Error("Length mismatch between request ("+t.length+") and response ("+e.length+").");t.forEach(function(t,r){return n.handle_codap_response(t,e[r])})}else if(e.success){o>=1&&console.log("== Request to CODAP succeeded: "+i()(t));try{h(t.resource)(t,e)}catch(t){console.log("** _get_codap_response_handler failed: "+t.message)}}else{var r="** Request to CODAP failed: "+i()(t);console.log(r),alert(r)}else console.log("** Request to CODAP seems to have gotten no response: "+i()(t))},this.send_request_to_codap=function(t,e){"logMessage"===t.resource&&"notify"===t.action&&(void 0!==t.values&&(t.values={}),t.values.formatStr=s+t.values.formatStr),w.call(t,function(r){return n.handle_codap_response(t,r,e)})},this.set_state=function(t){if(arguments.length>1&&void 0!==arguments[1]&&!arguments[1])for(var e in t)c[e]=t[e];else for(var n in c){var r=t[n];void 0!==r&&(c[n]=r)}},this.update_iframe_with_state=function(){n.send_request_to_codap({action:"update",resource:"interactiveFrame",values:c})};var w=new t.IframePhoneRpcEndpoint(this.handle_codap_request,"data-interactive",window.parent);this.send_request_to_codap({action:"get",resource:"interactiveFrame"}),function(){n.send_request_to_codap({action:"register",resource:"logMessageMonitor",values:{clientId:a,message:"*"}})}(),window.unload=l}var o=n(27),i=n.n(o);e.a=r},69:function(t,e,n){"use strict";(function(t,e){var r,r,o=n(80),i=n.n(o),a=n(81),s=n.n(a),u=n(27),c=n.n(u),l=n(84),d=n.n(l);!function(r){"object"==("undefined"==typeof exports?"undefined":d()(exports))?t.exports=r():"function"==typeof define&&n(144)?define(r):"undefined"!=typeof window?window.iframePhone=r():void 0!==e?e.iframePhone=r():"undefined"!=typeof self&&(self.iframePhone=r())}(function(){return function t(e,n,o){function i(s,u){if(!n[s]){if(!e[s]){var c="function"==typeof r&&r;if(!u&&c)return r(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n||t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e,n){function r(){function t(t){o.supported()?window.parent.postMessage(t,"*"):window.parent.postMessage(c()(t),"*")}function e(e,n){var r;r=1===arguments.length&&"object"===(void 0===e?"undefined":d()(e))&&"string"==typeof e.type?e:{type:e,content:n},y?t(r):b.push(r)}function n(){t({type:"hello"})}function r(t,e){g[t]=e}function u(){g={}}function l(){return s()(g)}function f(t){if(t.source===window.parent){var n=t.data;if("string"==typeof n&&(n=JSON.parse(n)),!y&&"hello"===n.type)for(y=!0,_();b.length>0;)e(b.shift());y&&g[n.type]&&g[n.type](n.content)}}function p(){y=!1,_(),window.removeEventListener("message",messsageListener)}function h(){w||(w=!0,window.parent!==window&&(v(),window.addEventListener("message",f,!1)))}function v(){m&&_(),m=window.setInterval(n,i),window.setTimeout(_,a),n()}function _(){window.clearInterval(m),m=null}var m,g={},w=!1,y=!1,b=[];return{initialize:h,getListenerNames:l,addListener:r,removeAllListeners:u,disconnect:p,post:e}}var o=t("./structured-clone"),i=200,a=6e4,u=null;e.exports=function(){return u||(u=new r),u}},{"./structured-clone":4}],2:[function(t,e,n){function r(){for(var t="abcdefghijklmnopqrstuvwxyz0123456789",e=t.length,n=[],r=0;r<10;r++)n.push(t[Math.floor(Math.random()*e)]);return n.join("")}var o=t("./parent-endpoint"),a=t("./iframe-endpoint");e.exports=function(t,e,n,s,u){function c(t,n){var o=r();f[o]={callback:n,timeout:window.setTimeout(function(){n&&n(void 0,new Error("IframePhone timed out waiting for reply"))},2e3)},u.post(e,{messageType:"call",uuid:o,value:t})}function l(){u.disconnect()}var f=i()({});t&&"object"===(void 0===t?"undefined":d()(t))&&(e=t.namespace,n=t.targetWindow,s=t.targetOrigin,u=t.phone,t=t.handler),u||(n===window.parent?(u=a(),u.initialize()):u=new o(n,s)),u.addListener(e,function(t){var n;"call"===t.messageType&&"function"==typeof this.handler?this.handler.call(void 0,t.value,function(n){u.post(e,{messageType:"returnValue",uuid:t.uuid,value:n})}):"returnValue"===t.messageType&&(n=f[t.uuid])&&(window.clearTimeout(n.timeout),n.callback&&n.callback.call(void 0,t.value),f[t.uuid]=null)}.bind(this)),this.handler=t,this.call=c.bind(this),this.disconnect=l.bind(this)}},{"./iframe-endpoint":1,"./parent-endpoint":3}],3:[function(t,e,n){var r=t("./structured-clone");e.exports=function(t,e,n){function o(t,n){var o;if(o=1===arguments.length&&"object"===(void 0===t?"undefined":d()(t))&&"string"==typeof t.type?t:{type:t,content:n},h){var i=s();r.supported()?i.postMessage(o,e):i.postMessage(c()(o),e)}else p.push(o)}function i(t,e){v[t]=e}function a(t){v[t]=null}function s(){if(f){var e=t.contentWindow;if(!e)throw"IFrame element needs to be added to DOM before communication can be started (.contentWindow is not available)";return e}return t}function u(t){var n;t.source!==s()||"*"!==e&&t.origin!==e||(n=t.data,"string"==typeof n&&(n=JSON.parse(n)),v[n.type]?v[n.type](n.content):console.log("cant handle type: "+n.type))}function l(){h=!1,window.removeEventListener("message",u)}var f,p=[],h=!1,v={};try{f=t.constructor===HTMLIFrameElement}catch(t){f=!1}return f&&(e&&e.constructor!==Function||(n=e,e=function(t){return t.src.match(/(.*?\/\/.*?)\//)[1]}(t))),"file://"===e&&(e="*"),i("hello",function(){for(h=!0,o({type:"hello",origin:window.location.href.match(/(.*?\/\/.*?)\//)[1]}),n&&"function"==typeof n&&n();p.length>0;)o(p.shift())}),window.addEventListener("message",u,!1),{post:o,addListener:i,removeListener:a,disconnect:l,getTargetWindow:s,targetOrigin:e}}},{"./structured-clone":4}],4:[function(t,e,n){var r=!1;!function(){var t=0;if(window.postMessage)try{window.onmessage=function(e){var n=Object.prototype.toString.call(e.data);t=-1!=n.indexOf("Null")||-1!=n.indexOf("DOMWindow")?1:0,r={structuredClones:t}},window.postMessage(document.createElement("a"),"*")}catch(e){t=e.DATA_CLONE_ERR||"Cannot post cyclic structures."==e.message?1:0,r={structuredClones:t}}}(),n.supported=function(){return r&&r.structuredClones>0}},{}],5:[function(t,e,n){e.exports={ParentEndpoint:t("./lib/parent-endpoint"),getIFrameEndpoint:t("./lib/iframe-endpoint"),structuredClone:t("./lib/structured-clone"),IframePhoneRpcEndpoint:t("./lib/iframe-phone-rpc-endpoint")}},{"./lib/iframe-endpoint":1,"./lib/iframe-phone-rpc-endpoint":2,"./lib/parent-endpoint":3,"./lib/structured-clone":4}]},{},[5])(5)})}).call(e,n(145)(t),n(67))},70:function(t,e,n){"use strict";/**
 * @file This module contains utility functions for accessing MCBKT engine of
 *    <a href="https://ukde.physicsfront.com">UKDE by Physics Front</a>.
 * @copyright (c) 2017, Sam Gweon (Sam@physicsfront.com)
 * @license <a href="https://www.apache.org/licenses/LICENSE-2.0">
 *    Apache License, Version 2.0</a> (also, see file NOTICE).
 * @author Sam Gweon (Sam@physicsfront.com)
 * @version 0.1.0
 * @module mcbkt-client
 */
function r(){return!0}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments[2],o=arguments[3];if(r())return e=e.toUpperCase(),new c.a(function(r,i){var a=new XMLHttpRequest;if(a.open(e,t),a.onload=function(){return 200===a.status?r(a.response):i(Error(a.statusText))},a.onerror=function(t){return i(Error("Network Error: "+t))},n&&(a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n=s()(n)),void 0!==o)for(var u in o)a.setRequestHeader(u,o[u]);a.send(n)})}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://ukde.physicsfront.com/logdata/codapproxy_stub",n=arguments[2];if(r())return o(e,"post",t,n)}var a=n(27),s=n.n(a),u=n(82),c=n.n(u);e.a=i},71:function(t,e,n){"use strict";var r=n(47),o=n(142),i=n(138),a=n.n(i);r.a.use(o.a),e.a=new o.a({routes:[{path:"/",name:"Panel",component:a.a,props:{heading:"",unit_activity_type:"challenge"}}]})},72:function(t,e,n){function r(t){n(134)}var o=n(46)(n(73),n(140),r,null,null);t.exports=o.exports},73:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={created:function(){},name:"app"}},74:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(77),o=n.n(r),i=n(79),a=n.n(i),s=n(48),u=n.n(s);e.default={name:"map_table_h",props:{data:{type:null,default:function(){return[["key 1","value 1"],["key 2","value 2"],["k3"]]},validator:function(t){return void 0!=t[u.a]||(console.log("data must be an iterable."),!1)}},body_tooltip:{type:String,default:""}},data:function(){return{}},computed:{map:function(){return new a.a(this.data)},keys:function(){return o()(this.map.keys()).map(function(t){return""+t})},vals:function(){return o()(this.map.values()).map(function(t){return""+t})}}}},75:function(t,e,n){"use strict";function r(t){return t.charAt(0).toUpperCase()+t.slice(1)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(78),i=n.n(o),a=n(136),s=n.n(a),u=n(137),c=n.n(u);e.default={name:"mckbt-panel",components:{map_table_h:c.a},props:{unit_activity_type:{default:"level",type:String},heading:{default:"Real time MCBKT",type:String},curitem_keys:{default:function(){return["id","cluster","time","npts"]},type:Array},allitems_keys:{default:function(){return["time","npts"]},type:Array}},data:function(){return{all_data:[{id:1,cluster:"A",time:30,npts:5},{id:2,cluster:"B",time:50,npts:10},{id:3,cluster:"C",time:100,npts:10}]}},computed:{body_tooltip_cur:{get:function(){var t=this.all_data;return t&&t.length?t[t.length-1].tooltip||"":""},set:function(){}},body_tooltip_cur_plus:{get:function(){var t=this.body_tooltip_cur.trim();return t.length?t.startsWith("A")||t.startsWith("B")||t.startsWith("E")?"GREAT! Cluster "+t:t.startsWith("C")?"Good! Cluster "+t:"Cluster "+t:""},set:function(){}},curitems:{get:function(){var t=this.all_data,e=this.curitem_keys,n=[];if(t.length){var r=t[t.length-1],o=!0,a=!1,s=void 0;try{for(var u,c=i()(e);!(o=(u=c.next()).done);o=!0){var l=u.value;n.push([l,r[l]||""])}}catch(t){a=!0,s=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}}else{var d=!0,f=!1,p=void 0;try{for(var h,v=i()(e);!(d=(h=v.next()).done);d=!0){var _=h.value;n.push([_,""])}}catch(t){f=!0,p=t}finally{try{!d&&v.return&&v.return()}finally{if(f)throw p}}}return n},set:function(){}},previtems:{get:function(){var t=this.all_data,e=this.curitem_keys,n=[],r=!0,o=!1,a=void 0;try{for(var s,u=i()(e);!(r=(s=u.next()).done);r=!0){for(var c=s.value,l=[],d=0;d<t.length-1;d++)l.push(t[d][c]);n.push([c+(c.endsWith("s")?"":"s"),l])}}catch(t){o=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n},set:function(){}},allitems:{get:function(){var t=this.all_data,e=this.allitems_keys,n=[],r=!0,o=!1,a=void 0;try{for(var s,u=i()(e);!(r=(s=u.next()).done);r=!0){for(var c=s.value,l=0,d=0;d<t.length;d++)l+=t[d][c];n.push([c,l||""])}}catch(t){o=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n},set:function(){}}},created:function(){var t=this;this.all_data=[],window.mcbkt_fit_consumer=function(e){var n=e.times||[],r=e.cluster||"",o=e.reffv_list||[],a=n.length,s=a?Math.round(n[a-1]-n[0]+3):"",u=o.length?o[o.length-1]:"",c=[],l=!0,d=!1,f=void 0;try{for(var p,h=i()(t.all_data);!(l=(p=h.next()).done);l=!0){var v=p.value;c.push(v.id)}}catch(t){d=!0,f=t}finally{try{!l&&h.return&&h.return()}finally{if(d)throw f}}var _=e.cluster_long||"",m=e.cluster_description||"",g="";_&&m&&(g=_+" : "+m);var w=void 0;w=o.join(",")===c.join(",")?t.all_data.slice(0,t.all_data.length-1):t.all_data,t.all_data=w.concat({id:u,cluster:r,time:s,npts:a,tooltip:g})}},methods:{add_new_data:function(){},replace_last_data:function(){},unregister_logdata_listener:function(){},register_mcbkt_client:function(t){},unregister_mcbkt_client:function(t){}},filters:{capitalize:r,pluralize:function(t){return s()(t,10)},capitalize_all:function(t){return t.split(" ").map(r).join(" ")}}}},76:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(47),o=n(72),i=n.n(o),a=n(71),s=n(70),u=n(69),c=n(68);/**
 * @file This app is a data interactive plugin that mediates the MCBKT
 *    engine service to the CODAP data interactive such as Ramp Game.
 *
 * @copyright (c) 2017, Physics Front LLC (main@physicsfront.com)
 * @license <a href="https://www.apache.org/licenses/LICENSE-2.0">
 *    Apache License, Version 2.0</a> (also, see file NOTICE).
 * @author Sam Gweon (Sam@physicsfront.com)
 * @version 0.1.0
 */
if(!window.iframePhone){if(!u.default)throw Error('Failed to load module "iframePhone".');window.iframePhone=u.default}Object.defineProperty(r.a.prototype,"$iframePhone",{value:window.iframePhone}),window.logdataListener=new c.a(window.iframePhone,function(t,e){t.application="CODAP",t.activity="Ramp Game 2017 09",n.i(s.a)(t).then(function(t){var e=JSON.parse(t);e.answer&&window.mcbkt_fit_consumer&&window.mcbkt_fit_consumer(e)},function(){}).catch(function(){})},"Real Time MCBKT",0),Object.defineProperty(r.a.prototype,"$logdataListener",{value:window.logdataListener}),r.a.config.productionTip=!1,new r.a({el:"#app",router:a.a,template:"<App/>",components:{App:i.a}})}},[76]);
//# sourceMappingURL=app.d3c91072bf8190a810d2.js.map