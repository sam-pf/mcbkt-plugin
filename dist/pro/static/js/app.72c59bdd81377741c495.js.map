{"version":3,"sources":["webpack:///static/js/app.72c59bdd81377741c495.js","webpack:///./src/components/map_table_h.vue?010f","webpack:///./src/components/panel.vue?03eb","webpack:///./src/components/map_table_h.vue?3dbe","webpack:///./src/App.vue?58f3","webpack:///./src/components/panel.vue?bb3e","webpack:///./src/js-ext/iframe-logdata-listener.js","webpack:///./src/js-ext/iframe-phone.js","webpack:///./src/js-ext/mcbkt-client.js","webpack:///./src/router/index.js","webpack:///./src/App.vue?35a7","webpack:///App.vue","webpack:///map_table_h.vue","webpack:///panel.vue","webpack:///./src/main.js"],"names":["webpackJsonp","133","module","exports","134","135","137","__webpack_require__","injectStyle","ssrContext","Component","138","139","render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","key","_v","_s","attrs","title","body_tooltip","val","staticRenderFns","140","id","141","body_tooltip_cur_plus","_f","heading","unit_activity_type","data","curitems","body_tooltip_cur","previtems","allitems","68","__webpack_exports__","IFrameLogDataListener","iframePhone","logdata_callback","_this","arguments","length","undefined","verbosity","Error","trim","client_id","Date","getTime","Math","round","random","my_formatStr_prefix","last_codap_response","state","version","preventBringToFront","dimensions","width","height","_destroy","_unregister_for_logdata","connection","disconnect","_err_msg_for_unhandled_codap_request","request","action","resource","_err_msg_for_unhandled_codap_response","_get_codap_request_handler","handler","_request_handler_registry","_get_codap_response_handler","_response_handler_registry","interactiveState","logMessageNotice","json_data","values","formatStr","startsWith","console","log","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","logMonitor","clientId","iframe_logdata_client_id","time","logdata_report_callback","message","interactiveFrame","response","frame_data","set_state","savedState","logMessage","logMessageMonitor","send_request_to_codap","report","handle_codap_request","callback","success","error","handle_codap_response","Array","isArray","forEach","rq","i_rq","msg","alert","req","opts","call","state_in","update_iframe_with_state","IframePhoneRpcEndpoint","window","parent","unload","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","n","69","global","require","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_typeof__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_typeof___default","e","define","self","t","r","s","o","u","a","i","f","1","IFrameEndpoint","postToParent","structuredClone","supported","postMessage","post","type","content","connected","postMessageQueue","push","postHello","addListener","fn","listeners","removeAllListeners","getListenerNames","messageListener","source","messageData","JSON","parse","stopPostingHello","shift","removeEventListener","messsageListener","initialize","isInitialized","startPostingHello","addEventListener","helloInterval","setInterval","HELLO_INTERVAL_LENGTH","setTimeout","HELLO_TIMEOUT_LENGTH","clearInterval","instance","./structured-clone","2","getPseudoUUID","chars","len","ret","floor","join","ParentEndpoint","getIFrameEndpoint","namespace","targetWindow","targetOrigin","phone","uuid","pendingCallbacks","timeout","messageType","value","callbackObj","returnValue","clearTimeout","bind","./iframe-endpoint","./parent-endpoint","3","targetWindowOrIframeEl","afterConnectedCallback","tWindow","getTargetWindow","messageName","func","handlers","removeListener","targetWindowIsIframeElement","contentWindow","receiveMessage","origin","constructor","HTMLIFrameElement","Function","iframe","src","match","location","href","4","featureSupported","result","onmessage","Object","prototype","toString","indexOf","structuredClones","document","createElement","DATA_CLONE_ERR","5","./lib/iframe-endpoint","./lib/iframe-phone-rpc-endpoint","./lib/parent-endpoint","./lib/structured-clone","70","embedded_in_codap","ajax_as_promise","url","method","header","toUpperCase","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default","resolve","reject","XMLHttpRequest","open","onload","status","statusText","onerror","setRequestHeader","send","post_logdata_for_mcbkt_analysis","logdata","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__","71","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__components_panel__","__WEBPACK_IMPORTED_MODULE_2__components_panel___default","use","routes","path","name","component","props","72","73","defineProperty","created","74","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_from__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_from___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_map__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_map___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_symbol_iterator__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_symbol_iterator___default","default","validator","String","computed","map","keys","x","vals","75","_capitalize","charAt","slice","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default","__WEBPACK_IMPORTED_MODULE_1_pluralize__","__WEBPACK_IMPORTED_MODULE_1_pluralize___default","__WEBPACK_IMPORTED_MODULE_2__map_table_h_vue__","__WEBPACK_IMPORTED_MODULE_2__map_table_h_vue___default","components","map_table_h","curitem_keys","allitems_keys","all_data","cluster","npts","get","d","tooltip","set","btc","ans","m","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_key","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","endsWith","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","mcbkt_fit_consumer","times","reffv_list","prev_reffv_list","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","cluster_long","cluster_desc","cluster_description","old_data","concat","methods","add_new_data","replace_last_data","unregister_logdata_listener","register_mcbkt_client","logdata_provider","unregister_mcbkt_client","filters","capitalize","pluralize","capitalize_all","split","76","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_1__App___default","__WEBPACK_IMPORTED_MODULE_2__router__","__WEBPACK_IMPORTED_MODULE_3__js_ext_mcbkt_client_js__","__WEBPACK_IMPORTED_MODULE_4__js_ext_iframe_phone_js__","__WEBPACK_IMPORTED_MODULE_5__js_ext_iframe_logdata_listener_js__","logdataListener","application","activity","then","answer","catch","config","productionTip","el","router","template","App"],"mappings":"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","file":"static/js/app.72c59bdd81377741c495.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 133:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 134:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 135:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 137:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(133)\n}\nvar Component = __webpack_require__(46)(\n  /* script */\n  __webpack_require__(74),\n  /* template */\n  __webpack_require__(139),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-0df4abcc\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 138:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(135)\n}\nvar Component = __webpack_require__(46)(\n  /* script */\n  __webpack_require__(75),\n  /* template */\n  __webpack_require__(141),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-44d0497c\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 139:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('table', {\n    staticClass: \"table map_table_h\"\n  }, [_c('thead', [_c('tr', _vm._l((_vm.keys), function(key) {\n    return _c('th', [_vm._v(_vm._s('' + key))])\n  }))]), _vm._v(\" \"), _c('tbody', {\n    attrs: {\n      \"title\": _vm.body_tooltip\n    }\n  }, [_c('tr', _vm._l((_vm.vals), function(val) {\n    return _c('td', [_vm._v(_vm._s('' + val))])\n  }))])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 140:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('div', {\n    attrs: {\n      \"id\": \"app-innerframe\"\n    }\n  }, [_c('router-view')], 1)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 141:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"mcbkt-panel\"\n  }, [_c('p', {\n    staticClass: \"explain_cluster\"\n  }, [_vm._v(_vm._s(_vm.body_tooltip_cur_plus))]), _vm._v(\" \"), _c('h1', [_vm._v(_vm._s(_vm._f(\"capitalize_all\")(_vm.heading)))]), _vm._v(\" \"), _c('h2', {\n    staticClass: \"curact\"\n  }, [_vm._v(\"Current \" + _vm._s(_vm._f(\"capitalize\")(_vm.unit_activity_type)))]), _vm._v(\" \"), _c('map_table_h', {\n    attrs: {\n      \"data\": _vm.curitems,\n      \"body_tooltip\": _vm.body_tooltip_cur\n    }\n  }), _vm._v(\" \"), _c('h2', {\n    staticClass: \"preact\"\n  }, [_vm._v(\"Previous \" + _vm._s(_vm._f(\"pluralize\")(_vm._f(\"capitalize\")(_vm.unit_activity_type))))]), _vm._v(\" \"), _c('map_table_h', {\n    attrs: {\n      \"data\": _vm.previtems\n    }\n  }), _vm._v(\" \"), _c('h2', {\n    staticClass: \"allact\"\n  }, [_vm._v(\"All \" + _vm._s(_vm._f(\"pluralize\")(_vm._f(\"capitalize\")(_vm.unit_activity_type))))]), _vm._v(\" \"), _c('map_table_h', {\n    attrs: {\n      \"data\": _vm.allitems\n    }\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 68:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export IFrameLogDataListener */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/**\n * @file This module is for listening to log data generated by CODAP, do\n *    stuff on log data, and then possibly pushing the result back into CODAP\n *    log stream.\n *    <p><i>Thanks are due to Doug Martin and Jonathan Sandoe</i> for their\n *    code of DataflowGettingStarted data-interactive, which gave some\n *    initial guideline and some hints to the code of this file.</p>\n *\n * @copyright (c) 2017, Physics Front LLC (main@physicsfront.com)\n * @license <a href=\"https://www.apache.org/licenses/LICENSE-2.0\">\n *    Apache License, Version 2.0</a> (also, see file NOTICE).\n * @author Sam Gweon (Sam@physicsfront.com)\n * @version 0.1.0\n * @module iframe-logdata-listener\n */\n\n\nfunction IFrameLogDataListener(iframePhone, logdata_callback) {\n  var _this = this;\n\n  var title = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"Real Time MCBKT\";\n  var verbosity = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  if (typeof title !== \"string\") throw Error(\"** The value of title must be a string.\");title = title.trim();if (!title.length) throw Error(\"** The value of title cannot be an empty string.\");if (typeof logdata_callback !== \"function\") throw Error(\"** The value of logdata_callback must be a function.\");var client_id = title + \"--\" + new Date().getTime() + \"--\" + Math.round(1e10 * Math.random());var my_formatStr_prefix = client_id + \"::\";var last_codap_response = null;var state = { title: title, version: \"0.1.0\", preventBringToFront: false, dimensions: { width: 500, height: 500 } };var _destroy = function _destroy() {\n    _unregister_for_logdata();connection.disconnect();\n  };var _err_msg_for_unhandled_codap_request = function _err_msg_for_unhandled_codap_request(request) {\n    return 'Handler not implemented for action \"' + request.action + '\" for CODAP request with resource \"' + request.resource + '\".';\n  };var _err_msg_for_unhandled_codap_response = function _err_msg_for_unhandled_codap_response(request) {\n    return 'Handler not implemented for CODAP response to request \"' + request.action + '\" with resource \"' + request.resource + '\".';\n  };var _get_codap_request_handler = function _get_codap_request_handler(resource) {\n    var handler = _request_handler_registry[resource];if (handler === undefined) handler = function handler() {\n      throw Error(\"No handler for CODAP request \" + 'with resource \"' + resource + '\".');\n    };return handler;\n  };var _get_codap_response_handler = function _get_codap_response_handler(resource) {\n    var handler = _response_handler_registry[resource];if (handler === undefined) handler = function handler() {\n      throw Error(\"No handler for \" + 'CODAP response to request with resource \"' + resource + '\".');\n    };return handler;\n  };var _register_for_logdata = function _register_for_logdata() {\n    _this.send_request_to_codap({ action: \"register\", resource: \"logMessageMonitor\", values: { clientId: client_id, message: \"*\" } });\n  };var _request_handler_registry = { interactiveState: function interactiveState(request) {\n      switch (request.action) {case \"get\":\n          return state;default:\n          throw Error(_err_msg_for_unhandled_codap_request(request));}\n    }, logMessageNotice: function logMessageNotice(request) {\n      var json_data = request.values;switch (request.action) {case \"notify\":\n          if (json_data.formatStr.startsWith(my_formatStr_prefix)) {\n            if (verbosity >= 1) console.log(\"== got boomeranged logdata: \" + __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(json_data));\n          } else {\n            if (json_data.logMonitor && client_id == json_data.logMonitor.clientId) {\n              delete json_data.logMonitor;json_data.iframe_logdata_client_id = client_id;json_data.time = new Date().getTime() * .001;logdata_callback(json_data, logdata_report_callback);\n            }\n          }return { message: \"logdatum was received\" };default:\n          throw Error(_err_msg_for_unhandled_codap_request(request));}\n    } };var _response_handler_registry = { interactiveFrame: function interactiveFrame(request, response) {\n      switch (request.action) {case \"get\":\n          {\n            var frame_data = response.values;_this.set_state(frame_data);if (frame_data.savedState) _this.set_state(frame_data.savedState, false);\n          }return;default:\n          throw Error(_err_msg_for_unhandled_codap_response(request));}\n    }, logMessage: function logMessage(request) {\n      switch (request.action) {case \"notify\":\n          if (verbosity >= 1) console.log(\"log data were recevied well by CODAP---but \" + \"only formatStr and replaceArgs, I think.\");return;default:\n          throw Error(_err_msg_for_unhandled_codap_response(request));}\n    }, logMessageMonitor: function logMessageMonitor(request) {\n      switch (request.action) {case \"register\":\n          if (verbosity >= 1) console.log(\"== got register data: \" + __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(request.values));return;default:\n          throw Error(_err_msg_for_unhandled_codap_request(request));}\n    } };var _unregister_for_logdata = function _unregister_for_logdata() {\n    _this.send_request_to_codap({ action: \"unregister\", resource: \"logMessageMonitor\", values: { clientId: client_id } });\n  };var logdata_report_callback = function logdata_report_callback(report) {\n    if (report.formatStr == undefined) report.formatStr = title + \" report\";if (verbosity >= 1) console.log(\"== pushing logdata to CODAP: \" + __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(report));_this.send_request_to_codap({ action: \"notify\", resource: \"logMessage\", values: report });\n  };this.handle_codap_request = function (request, callback) {\n    if (verbosity >= 1) console.log(\"== handle_codap_request: \" + __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(request));var success = false,\n        values = null;try {\n      values = _get_codap_request_handler(request.resource)(request);success = true;\n    } catch (error) {\n      console.log(\"** _get_codap_request_handler failed: \" + error.message);\n    }callback({ success: success, values: values });\n  };this.handle_codap_response = function (request, response) {\n    if (verbosity >= 1) console.log(\"== handle_codap_response: \" + __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(response));last_codap_response = response;if (!response) {\n      console.log(\"** Request to CODAP seems to have gotten no response: \" + __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(request));\n    } else if (Array.isArray(response)) {\n      if (!Array.isArray(request)) throw Error(\"Type mismatch between request (non-Array) and \" + \"response (Array).\");if (response.length != request.length) throw Error(\"Length mismatch between request (\" + request.length + \") and response (\" + response.length + \").\");request.forEach(function (rq, i_rq) {\n        return _this.handle_codap_response(rq, response[i_rq]);\n      });\n    } else if (response.success) {\n      if (verbosity >= 1) console.log(\"== Request to CODAP succeeded: \" + __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(request));try {\n        _get_codap_response_handler(request.resource)(request, response);\n      } catch (error) {\n        console.log(\"** _get_codap_response_handler failed: \" + error.message);\n      }\n    } else {\n      var msg = \"** Request to CODAP failed: \" + __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(request);console.log(msg);alert(msg);\n    }\n  };this.send_request_to_codap = function (req, opts) {\n    if (req.resource === \"logMessage\" && req.action === \"notify\") {\n      if (req.values !== undefined) req.values = {};req.values.formatStr = my_formatStr_prefix + req.values.formatStr;\n    }connection.call(req, function (response) {\n      return _this.handle_codap_response(req, response, opts);\n    });\n  };this.set_state = function (state_in) {\n    var strict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    if (strict) for (var key in state) {\n      var val = state_in[key];if (val !== undefined) state[key] = val;\n    } else for (var _key in state_in) {\n      state[_key] = state_in[_key];\n    }\n  };this.update_iframe_with_state = function () {\n    _this.send_request_to_codap({ action: \"update\", resource: \"interactiveFrame\", values: state });\n  };var connection = new iframePhone.IframePhoneRpcEndpoint(this.handle_codap_request, \"data-interactive\", window.parent);this.send_request_to_codap({ action: \"get\", resource: \"interactiveFrame\" });_register_for_logdata();window.unload = _destroy;\n};/* harmony default export */ __webpack_exports__[\"a\"] = (IFrameLogDataListener);\n\n/***/ }),\n\n/***/ 69:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(module, global) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys__ = __webpack_require__(81);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_typeof__ = __webpack_require__(84);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_typeof___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_typeof__);\nvar require;var require;\n\n\n\n!function (e) {\n  \"object\" == (typeof exports === \"undefined\" ? \"undefined\" : __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_typeof___default()(exports)) ? module.exports = e() : \"function\" == typeof define && __webpack_require__(144) ? define(e) : \"undefined\" != typeof window ? window.iframePhone = e() : \"undefined\" != typeof global ? global.iframePhone = e() : \"undefined\" != typeof self && (self.iframePhone = e());\n}(function () {\n  var define, module, exports;return function e(t, n, r) {\n    function s(o, u) {\n      if (!n[o]) {\n        if (!t[o]) {\n          var a = typeof require == \"function\" && require;if (!u && a) return require(o, !0);if (i) return i(o, !0);throw new Error(\"Cannot find module '\" + o + \"'\");\n        }var f = n[o] = { exports: {} };t[o][0].call(f.exports, function (e) {\n          var n = t[o][1][e];return s(n ? n : e);\n        }, f, f.exports, e, t, n, r);\n      }return n[o].exports;\n    }var i = typeof require == \"function\" && require;for (var o = 0; o < r.length; o++) {\n      s(r[o]);\n    }return s;\n  }({ 1: [function (require, module, exports) {\n      var structuredClone = require('./structured-clone');\n      var HELLO_INTERVAL_LENGTH = 200;\n      var HELLO_TIMEOUT_LENGTH = 60000;\n\n      function IFrameEndpoint() {\n        var listeners = {};\n        var isInitialized = false;\n        var connected = false;\n        var postMessageQueue = [];\n        var helloInterval;\n\n        function postToParent(message) {\n          // See http://dev.opera.com/articles/view/window-postmessage-messagechannel/#crossdoc\n          //     https://github.com/Modernizr/Modernizr/issues/388\n          //     http://jsfiddle.net/ryanseddon/uZTgD/2/\n          if (structuredClone.supported()) {\n            window.parent.postMessage(message, '*');\n          } else {\n            window.parent.postMessage(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify___default()(message), '*');\n          }\n        }\n\n        function post(type, content) {\n          var message;\n          // Message object can be constructed from 'type' and 'content' arguments or it can be passed\n          // as the first argument.\n          if (arguments.length === 1 && (typeof type === \"undefined\" ? \"undefined\" : __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_typeof___default()(type)) === 'object' && typeof type.type === 'string') {\n            message = type;\n          } else {\n            message = {\n              type: type,\n              content: content\n            };\n          }\n          if (connected) {\n            postToParent(message);\n          } else {\n            postMessageQueue.push(message);\n          }\n        }\n\n        function postHello() {\n          postToParent({\n            type: 'hello'\n          });\n        }\n\n        function addListener(type, fn) {\n          listeners[type] = fn;\n        }\n\n        function removeAllListeners() {\n          listeners = {};\n        }\n\n        function getListenerNames() {\n          return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys___default()(listeners);\n        }\n\n        function messageListener(message) {\n          // Anyone can send us a message. Only pay attention to messages from parent.\n          if (message.source !== window.parent) return;\n          var messageData = message.data;\n          if (typeof messageData === 'string') messageData = JSON.parse(messageData);\n\n          if (!connected && messageData.type === 'hello') {\n            connected = true;\n            stopPostingHello();\n            while (postMessageQueue.length > 0) {\n              post(postMessageQueue.shift());\n            }\n          }\n\n          if (connected && listeners[messageData.type]) {\n            listeners[messageData.type](messageData.content);\n          }\n        }\n\n        function disconnect() {\n          connected = false;\n          stopPostingHello();\n          window.removeEventListener('message', messsageListener);\n        }\n\n        /**\n          Initialize communication with the parent frame. This should not be called until the app's custom\n          listeners are registered (via our 'addListener' public method) because, once we open the\n          communication, the parent window may send any messages it may have queued. Messages for which\n          we don't have handlers will be silently ignored.\n        */\n        function initialize() {\n          if (isInitialized) {\n            return;\n          }\n          isInitialized = true;\n          if (window.parent === window) return;\n\n          // We kick off communication with the parent window by sending a \"hello\" message. Then we wait\n          // for a handshake (another \"hello\" message) from the parent window.\n          startPostingHello();\n          window.addEventListener('message', messageListener, false);\n        }\n\n        function startPostingHello() {\n          if (helloInterval) {\n            stopPostingHello();\n          }\n          helloInterval = window.setInterval(postHello, HELLO_INTERVAL_LENGTH);\n          window.setTimeout(stopPostingHello, HELLO_TIMEOUT_LENGTH);\n          // Post the first msg immediately.\n          postHello();\n        }\n\n        function stopPostingHello() {\n          window.clearInterval(helloInterval);\n          helloInterval = null;\n        }\n\n        // Public API.\n        return {\n          initialize: initialize,\n          getListenerNames: getListenerNames,\n          addListener: addListener,\n          removeAllListeners: removeAllListeners,\n          disconnect: disconnect,\n          post: post\n        };\n      }\n\n      var instance = null;\n\n      // IFrameEndpoint is a singleton, as iframe can't have multiple parents anyway.\n      module.exports = function getIFrameEndpoint() {\n        if (!instance) {\n          instance = new IFrameEndpoint();\n        }\n        return instance;\n      };\n    }, { \"./structured-clone\": 4 }], 2: [function (require, module, exports) {\n      var ParentEndpoint = require('./parent-endpoint');\n      var getIFrameEndpoint = require('./iframe-endpoint');\n\n      // Not a real UUID as there's an RFC for that (needed for proper distributed computing).\n      // But in this fairly parochial situation, we just need to be fairly sure to avoid repeats.\n      function getPseudoUUID() {\n        var chars = 'abcdefghijklmnopqrstuvwxyz0123456789';\n        var len = chars.length;\n        var ret = [];\n\n        for (var i = 0; i < 10; i++) {\n          ret.push(chars[Math.floor(Math.random() * len)]);\n        }\n        return ret.join('');\n      }\n\n      module.exports = function IframePhoneRpcEndpoint(handler, namespace, targetWindow, targetOrigin, phone) {\n        var pendingCallbacks = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()({});\n\n        // if it's a non-null object, rather than a function, 'handler' is really an options object\n        if (handler && (typeof handler === \"undefined\" ? \"undefined\" : __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_typeof___default()(handler)) === 'object') {\n          namespace = handler.namespace;\n          targetWindow = handler.targetWindow;\n          targetOrigin = handler.targetOrigin;\n          phone = handler.phone;\n          handler = handler.handler;\n        }\n\n        if (!phone) {\n          if (targetWindow === window.parent) {\n            phone = getIFrameEndpoint();\n            phone.initialize();\n          } else {\n            phone = new ParentEndpoint(targetWindow, targetOrigin);\n          }\n        }\n\n        phone.addListener(namespace, function (message) {\n          var callbackObj;\n\n          if (message.messageType === 'call' && typeof this.handler === 'function') {\n            this.handler.call(undefined, message.value, function (returnValue) {\n              phone.post(namespace, {\n                messageType: 'returnValue',\n                uuid: message.uuid,\n                value: returnValue\n              });\n            });\n          } else if (message.messageType === 'returnValue') {\n            callbackObj = pendingCallbacks[message.uuid];\n\n            if (callbackObj) {\n              window.clearTimeout(callbackObj.timeout);\n              if (callbackObj.callback) {\n                callbackObj.callback.call(undefined, message.value);\n              }\n              pendingCallbacks[message.uuid] = null;\n            }\n          }\n        }.bind(this));\n\n        function call(message, callback) {\n          var uuid = getPseudoUUID();\n\n          pendingCallbacks[uuid] = {\n            callback: callback,\n            timeout: window.setTimeout(function () {\n              if (callback) {\n                callback(undefined, new Error(\"IframePhone timed out waiting for reply\"));\n              }\n            }, 2000)\n          };\n\n          phone.post(namespace, {\n            messageType: 'call',\n            uuid: uuid,\n            value: message\n          });\n        }\n\n        function disconnect() {\n          phone.disconnect();\n        }\n\n        this.handler = handler;\n        this.call = call.bind(this);\n        this.disconnect = disconnect.bind(this);\n      };\n    }, { \"./iframe-endpoint\": 1, \"./parent-endpoint\": 3 }], 3: [function (require, module, exports) {\n      var structuredClone = require('./structured-clone');\n\n      /**\n        Call as:\n          new ParentEndpoint(targetWindow, targetOrigin, afterConnectedCallback)\n            targetWindow is a WindowProxy object. (Messages will be sent to it)\n      \n            targetOrigin is the origin of the targetWindow. (Messages will be restricted to this origin)\n      \n            afterConnectedCallback is an optional callback function to be called when the connection is\n              established.\n      \n        OR (less secure):\n          new ParentEndpoint(targetIframe, afterConnectedCallback)\n      \n            targetIframe is a DOM object (HTMLIframeElement); messages will be sent to its contentWindow.\n      \n            afterConnectedCallback is an optional callback function\n      \n          In this latter case, targetOrigin will be inferred from the value of the src attribute of the\n          provided DOM object at the time of the constructor invocation. This is less secure because the\n          iframe might have been navigated to an unexpected domain before constructor invocation.\n      \n        Note that it is important to specify the expected origin of the iframe's content to safeguard\n        against sending messages to an unexpected domain. This might happen if our iframe is navigated to\n        a third-party URL unexpectedly. Furthermore, having a reference to Window object (as in the first\n        form of the constructor) does not protect against sending a message to the wrong domain. The\n        window object is actualy a WindowProxy which transparently proxies the Window object of the\n        underlying iframe, so that when the iframe is navigated, the \"same\" WindowProxy now references a\n        completely differeent Window object, possibly controlled by a hostile domain.\n      \n        See http://www.esdiscuss.org/topic/a-dom-use-case-that-can-t-be-emulated-with-direct-proxies for\n        more about this weird behavior of WindowProxies (the type returned by <iframe>.contentWindow).\n      */\n\n      module.exports = function ParentEndpoint(targetWindowOrIframeEl, targetOrigin, afterConnectedCallback) {\n        var postMessageQueue = [];\n        var connected = false;\n        var handlers = {};\n        var targetWindowIsIframeElement;\n\n        function getIframeOrigin(iframe) {\n          return iframe.src.match(/(.*?\\/\\/.*?)\\//)[1];\n        }\n\n        function post(type, content) {\n          var message;\n          // Message object can be constructed from 'type' and 'content' arguments or it can be passed\n          // as the first argument.\n          if (arguments.length === 1 && (typeof type === \"undefined\" ? \"undefined\" : __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_typeof___default()(type)) === 'object' && typeof type.type === 'string') {\n            message = type;\n          } else {\n            message = {\n              type: type,\n              content: content\n            };\n          }\n          if (connected) {\n            var tWindow = getTargetWindow();\n            // if we are laready connected ... send the message\n            // See http://dev.opera.com/articles/view/window-postmessage-messagechannel/#crossdoc\n            //     https://github.com/Modernizr/Modernizr/issues/388\n            //     http://jsfiddle.net/ryanseddon/uZTgD/2/\n            if (structuredClone.supported()) {\n              tWindow.postMessage(message, targetOrigin);\n            } else {\n              tWindow.postMessage(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify___default()(message), targetOrigin);\n            }\n          } else {\n            // else queue up the messages to send after connection complete.\n            postMessageQueue.push(message);\n          }\n        }\n\n        function addListener(messageName, func) {\n          handlers[messageName] = func;\n        }\n\n        function removeListener(messageName) {\n          handlers[messageName] = null;\n        }\n\n        // Note that this function can't be used when IFrame element hasn't been added to DOM yet\n        // (.contentWindow would be null). At the moment risk is purely theoretical, as the parent endpoint\n        // only listens for an incoming 'hello' message and the first time we call this function\n        // is in #receiveMessage handler (so iframe had to be initialized before, as it could send 'hello').\n        // It would become important when we decide to refactor the way how communication is initialized.\n        function getTargetWindow() {\n          if (targetWindowIsIframeElement) {\n            var tWindow = targetWindowOrIframeEl.contentWindow;\n            if (!tWindow) {\n              throw \"IFrame element needs to be added to DOM before communication \" + \"can be started (.contentWindow is not available)\";\n            }\n            return tWindow;\n          }\n          return targetWindowOrIframeEl;\n        }\n\n        function receiveMessage(message) {\n          var messageData;\n          if (message.source === getTargetWindow() && (targetOrigin === '*' || message.origin === targetOrigin)) {\n            messageData = message.data;\n            if (typeof messageData === 'string') {\n              messageData = JSON.parse(messageData);\n            }\n            if (handlers[messageData.type]) {\n              handlers[messageData.type](messageData.content);\n            } else {\n              console.log(\"cant handle type: \" + messageData.type);\n            }\n          }\n        }\n\n        function disconnect() {\n          connected = false;\n          window.removeEventListener('message', receiveMessage);\n        }\n\n        // handle the case that targetWindowOrIframeEl is actually an <iframe> rather than a Window(Proxy) object\n        // Note that if it *is* a WindowProxy, this probe will throw a SecurityException, but in that case\n        // we also don't need to do anything\n        try {\n          targetWindowIsIframeElement = targetWindowOrIframeEl.constructor === HTMLIFrameElement;\n        } catch (e) {\n          targetWindowIsIframeElement = false;\n        }\n\n        if (targetWindowIsIframeElement) {\n          // Infer the origin ONLY if the user did not supply an explicit origin, i.e., if the second\n          // argument is empty or is actually a callback (meaning it is supposed to be the\n          // afterConnectionCallback)\n          if (!targetOrigin || targetOrigin.constructor === Function) {\n            afterConnectedCallback = targetOrigin;\n            targetOrigin = getIframeOrigin(targetWindowOrIframeEl);\n          }\n        }\n\n        // Handle pages served through file:// protocol. Behaviour varies in different browsers. Safari sets origin\n        // to 'file://' and everything works fine, but Chrome and Safari set message.origin to null.\n        // Also, https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage says:\n        //  > Lastly, posting a message to a page at a file: URL currently requires that the targetOrigin argument be \"*\".\n        //  > file:// cannot be used as a security restriction; this restriction may be modified in the future.\n        // So, using '*' seems like the only possible solution.\n        if (targetOrigin === 'file://') {\n          targetOrigin = '*';\n        }\n\n        // when we receive 'hello':\n        addListener('hello', function () {\n          connected = true;\n\n          // send hello response\n          post({\n            type: 'hello',\n            // `origin` property isn't used by IframeEndpoint anymore (>= 1.2.0), but it's being sent to be\n            // backward compatible with old IframeEndpoint versions (< v1.2.0).\n            origin: window.location.href.match(/(.*?\\/\\/.*?)\\//)[1]\n          });\n\n          // give the user a chance to do things now that we are connected\n          // note that is will happen before any queued messages\n          if (afterConnectedCallback && typeof afterConnectedCallback === \"function\") {\n            afterConnectedCallback();\n          }\n\n          // Now send any messages that have been queued up ...\n          while (postMessageQueue.length > 0) {\n            post(postMessageQueue.shift());\n          }\n        });\n\n        window.addEventListener('message', receiveMessage, false);\n\n        // Public API.\n        return {\n          post: post,\n          addListener: addListener,\n          removeListener: removeListener,\n          disconnect: disconnect,\n          getTargetWindow: getTargetWindow,\n          targetOrigin: targetOrigin\n        };\n      };\n    }, { \"./structured-clone\": 4 }], 4: [function (require, module, exports) {\n      var featureSupported = false;\n\n      (function () {\n        var result = 0;\n\n        if (!!window.postMessage) {\n          try {\n            // Safari 5.1 will sometimes throw an exception and sometimes won't, lolwut?\n            // When it doesn't we capture the message event and check the\n            // internal [[Class]] property of the message being passed through.\n            // Safari will pass through DOM nodes as Null iOS safari on the other hand\n            // passes it through as DOMWindow, gotcha.\n            window.onmessage = function (e) {\n              var type = Object.prototype.toString.call(e.data);\n              result = type.indexOf(\"Null\") != -1 || type.indexOf(\"DOMWindow\") != -1 ? 1 : 0;\n              featureSupported = {\n                'structuredClones': result\n              };\n            };\n            // Spec states you can't transmit DOM nodes and it will throw an error\n            // postMessage implimentations that support cloned data will throw.\n            window.postMessage(document.createElement(\"a\"), \"*\");\n          } catch (e) {\n            // BBOS6 throws but doesn't pass through the correct exception\n            // so check error message\n            result = e.DATA_CLONE_ERR || e.message == \"Cannot post cyclic structures.\" ? 1 : 0;\n            featureSupported = {\n              'structuredClones': result\n            };\n          }\n        }\n      })();\n\n      exports.supported = function supported() {\n        return featureSupported && featureSupported.structuredClones > 0;\n      };\n    }, {}], 5: [function (require, module, exports) {\n      module.exports = {\n        /**\n         * Allows to communicate with an iframe.\n         */\n        ParentEndpoint: require('./lib/parent-endpoint'),\n        /**\n         * Allows to communicate with a parent page.\n         * IFrameEndpoint is a singleton, as iframe can't have multiple parents anyway.\n         */\n        getIFrameEndpoint: require('./lib/iframe-endpoint'),\n        structuredClone: require('./lib/structured-clone'),\n\n        // TODO: May be misnamed\n        IframePhoneRpcEndpoint: require('./lib/iframe-phone-rpc-endpoint')\n\n      };\n    }, { \"./lib/iframe-endpoint\": 1, \"./lib/iframe-phone-rpc-endpoint\": 2, \"./lib/parent-endpoint\": 3, \"./lib/structured-clone\": 4 }] }, {}, [5])(5);\n});\n;\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(145)(module), __webpack_require__(67)))\n\n/***/ }),\n\n/***/ 70:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ajax_as_promise */\n/* unused harmony export post_scores_for_mcbkt_analysis */\n/* unused harmony export post_logdata_for_mcbkt_analysis */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__);\n/**\n * @file This module contains utility functions for accessing MCBKT engine of\n *    <a href=\"https://ukde.physicsfront.com\">UKDE by Physics Front</a>.\n * @copyright (c) 2017, Sam Gweon (Sam@physicsfront.com)\n * @license <a href=\"https://www.apache.org/licenses/LICENSE-2.0\">\n *    Apache License, Version 2.0</a> (also, see file NOTICE).\n * @author Sam Gweon (Sam@physicsfront.com)\n * @version 0.1.0\n * @module mcbkt-client\n */\n\n\n\nfunction embedded_in_codap() {\n  return true;\n}function ajax_as_promise(url) {\n  var method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"GET\";\n  var data = arguments[2];\n  var header = arguments[3];\n  if (!embedded_in_codap()) return;method = method.toUpperCase();return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n    var req = new XMLHttpRequest();req.open(method, url);req.onload = function () {\n      return req.status === 200 ? resolve(req.response) : reject(Error(req.statusText));\n    };req.onerror = function (e) {\n      return reject(Error(\"Network Error: \" + e));\n    };if (data) {\n      req.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");data = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(data);\n    }if (header !== undefined) for (var key in header) {\n      req.setRequestHeader(key, header[key]);\n    }req.send(data);\n  });\n};function post_scores_for_mcbkt_analysis(data) {\n  var url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"https://ukde.physicsfront.com/mcbkt/codapproxy_stub\";\n  var header = arguments[2];\n  if (!embedded_in_codap()) return;return ajax_as_promise(url, \"post\", data, header);\n};function post_logdata_for_mcbkt_analysis(logdata) {\n  var url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"https://ukde.physicsfront.com/logdata/codapproxy_stub\";\n  var header = arguments[2];\n  if (!embedded_in_codap()) return;return ajax_as_promise(url, \"post\", logdata, header);\n};/* harmony default export */ __webpack_exports__[\"a\"] = (post_logdata_for_mcbkt_analysis);\n\n/***/ }),\n\n/***/ 71:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(142);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_panel__ = __webpack_require__(138);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_panel___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_panel__);\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{\n    path: '/',\n    name: 'Panel',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_panel___default.a,\n    props: {\n      heading: '',\n      unit_activity_type: 'challenge'\n    }\n  }]\n}));\n\n/***/ }),\n\n/***/ 72:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(134)\n}\nvar Component = __webpack_require__(46)(\n  /* script */\n  __webpack_require__(73),\n  /* template */\n  __webpack_require__(140),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 73:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  created: function created() {\n    //// var codap_phone = new iframePhone.IframePhoneRpcEndpoint ()\n  },\n\n  name: 'app'\n});\n\n/***/ }),\n\n/***/ 74:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_from__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_from___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_from__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_map__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_map__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_symbol_iterator__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_symbol_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_symbol_iterator__);\n\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'map_table_h',\n  props: {\n    data: {\n      type: null,\n      default: function _default() {\n        return [['key 1', 'value 1'], ['key 2', 'value 2'], ['k3']];\n      },\n      validator: function validator(val) {\n        if (val[__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_symbol_iterator___default.a] == undefined) {\n          console.log('data must be an iterable.');\n          return false;\n        }\n        // Detailed checkes on Set or Array data: deleted (unnecessary, I\n        // think) on 08-25-2017.\n        return true;\n      }\n    },\n    body_tooltip: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {};\n  },\n\n  computed: {\n    map: function map() {\n      return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_map___default.a(this.data);\n    },\n    keys: function keys() {\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_from___default()(this.map.keys()).map(function (x) {\n        return '' + x;\n      });\n    },\n    vals: function vals() {\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_from___default()(this.map.values()).map(function (x) {\n        return '' + x;\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 75:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_pluralize__ = __webpack_require__(136);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_pluralize___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_pluralize__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__map_table_h_vue__ = __webpack_require__(137);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__map_table_h_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__map_table_h_vue__);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\nfunction _capitalize(val) {\n  return val.charAt(0).toUpperCase() + val.slice(1);\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'mckbt-panel',\n  components: {\n    'map_table_h': __WEBPACK_IMPORTED_MODULE_2__map_table_h_vue___default.a\n  },\n  props: {\n    unit_activity_type: {\n      default: 'level',\n      type: String\n    },\n    heading: {\n      default: 'Real time MCBKT',\n      type: String\n    },\n    curitem_keys: {\n      default: function _default() {\n        return ['id', 'cluster', 'time', 'npts']; // 'passed?'\n      },\n      type: Array\n    },\n    allitems_keys: {\n      default: function _default() {\n        return ['time', 'npts'];\n      },\n      type: Array\n    }\n  },\n  data: function data() {\n    return {\n      all_data: [// \"just for demo\": will be deleted on creation (see below)\n      { 'id': 1, 'cluster': 'A', 'time': 30, 'npts': 5 }, { 'id': 2, 'cluster': 'B', 'time': 50, 'npts': 10 }, { 'id': 3, 'cluster': 'C', 'time': 100, 'npts': 10 }]\n    };\n  },\n\n  computed: {\n    body_tooltip_cur: {\n      get: function get() {\n        var d = this.all_data;\n        if (!d) return '';\n        if (d.length) return d[d.length - 1].tooltip || '';\n        return '';\n      },\n      set: function set() {}\n    },\n    body_tooltip_cur_plus: {\n      get: function get() {\n        var btc = this.body_tooltip_cur.trim();\n        if (!btc.length) return '';\n        if (btc.startsWith('A') || btc.startsWith('B') || btc.startsWith('E')) return 'GREAT! Cluster ' + btc;else if (btc.startsWith('C')) return 'Good! Cluster ' + btc;else return 'Cluster' + btc;\n      },\n      set: function set() {}\n    },\n    curitems: {\n      get: function get() {\n        var d = this.all_data;\n        var keys = this.curitem_keys;\n        var ans = [];\n        if (d.length) {\n          var m = d[d.length - 1];\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(keys), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var key = _step.value;\n\n              ans.push([key, m[key] || '']);\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n        } else {\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(keys), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var _key = _step2.value;\n\n              ans.push([_key, '']);\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                _iterator2.return();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        }\n        return ans;\n      },\n      set: function set() {}\n    },\n    previtems: {\n      get: function get() {\n        var d = this.all_data;\n        var keys = this.curitem_keys;\n        var ans = [];\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(keys), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var key = _step3.value;\n\n            var a = [];\n            for (var i = 0; i < d.length - 1; i++) {\n              a.push(d[i][key]);\n            }ans.push([key + (key.endsWith('s') ? '' : 's'), a]);\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n\n        return ans;\n      },\n      set: function set() {}\n    },\n    allitems: {\n      get: function get() {\n        var d = this.all_data;\n        var keys = this.allitems_keys;\n        var ans = [];\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n          for (var _iterator4 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(keys), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n            var key = _step4.value;\n\n            var s = 0;\n            for (var i = 0; i < d.length; i++) {\n              s += d[i][key];\n            }ans.push([key, s ? s : \"\"]);\n          }\n        } catch (err) {\n          _didIteratorError4 = true;\n          _iteratorError4 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion4 && _iterator4.return) {\n              _iterator4.return();\n            }\n          } finally {\n            if (_didIteratorError4) {\n              throw _iteratorError4;\n            }\n          }\n        }\n\n        return ans;\n      },\n      set: function set() {}\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    this.all_data = [];\n    window.mcbkt_fit_consumer = function (data) {\n      var times = data.times || [];\n      // console.log ('times = ' + JSON.stringify (times))\n      var cluster = data.cluster || '';\n      // console.log ('cluster = ' + cluster)\n      var reffv_list = data.reffv_list || [];\n      // console.log ('reffv_list = ' + JSON.stringify (reffv_list))\n      // TODO: do a better job of timing?  3 is an estimated \"play time\"\n      var npts = times.length;\n      // console.log ('npts = ' + npts)\n      var time = npts ? Math.round(times[npts - 1] - times[0] + 3) : '';\n      // console.log ('time = ' + time)\n      var id = reffv_list.length ? reffv_list[reffv_list.length - 1] : '';\n      // console.log ('id = ' + id)\n      // console.log ('this.all_data = ' + JSON.stringify (this.all_data))\n      var prev_reffv_list = [];\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(_this.all_data), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var m = _step5.value;\n\n          prev_reffv_list.push(m.id);\n        } // console.log ('prev_reffv_list = ' + JSON.stringify (prev_reffv_list))\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5.return) {\n            _iterator5.return();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n\n      var cluster_long = data.cluster_long || '';\n      var cluster_desc = data.cluster_description || '';\n      var tooltip = '';\n      if (cluster_long && cluster_desc) tooltip = cluster_long + ' : ' + cluster_desc;\n      var old_data = void 0;\n      if (reffv_list.join(',') === prev_reffv_list.join(',')) old_data = _this.all_data.slice(0, _this.all_data.length - 1);else old_data = _this.all_data;\n      _this.all_data = old_data.concat({ 'id': id, 'cluster': cluster,\n        'time': time, 'npts': npts, 'tooltip': tooltip });\n    };\n  },\n\n  methods: {\n    // no methods have been found necessary just yet...\n    add_new_data: function add_new_data() {},\n    replace_last_data: function replace_last_data() {},\n    unregister_logdata_listener: function unregister_logdata_listener() {},\n    register_mcbkt_client: function register_mcbkt_client(logdata_provider) {},\n    unregister_mcbkt_client: function unregister_mcbkt_client(logdata_provider) {}\n  },\n  filters: {\n    capitalize: _capitalize,\n    pluralize: function pluralize(val) {\n      return __WEBPACK_IMPORTED_MODULE_1_pluralize___default()(val, 10);\n    },\n    capitalize_all: function capitalize_all(val) {\n      return val.split(\" \").map(_capitalize).join(\" \");\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 76:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(71);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__js_ext_mcbkt_client_js__ = __webpack_require__(70);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__js_ext_iframe_phone_js__ = __webpack_require__(69);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__js_ext_iframe_logdata_listener_js__ = __webpack_require__(68);\n/**\n * @file This app is a data interactive plugin that mediates the MCBKT\n *    engine service to the CODAP data interactive such as Ramp Game.\n *\n * @copyright (c) 2017, Physics Front LLC (main@physicsfront.com)\n * @license <a href=\"https://www.apache.org/licenses/LICENSE-2.0\">\n *    Apache License, Version 2.0</a> (also, see file NOTICE).\n * @author Sam Gweon (Sam@physicsfront.com)\n * @version 0.1.0\n */\n\n// The entry point of webpack.\n//\n// The Vue build version to load with the `import` command (runtime-only or\n// standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n\n\n// <<< window.iframePhone, window.logdataListener\n\n//\n// Also, these two globals are made available as (Vue instance).$iframePhone\n// and (Vue instance).$logdataListener.  However, it remains to be seen how\n// Vue instance can be conveniently access in (or around) a single vue file\n// that defines a component (maybe Vue.extend is relevant?).\n\n\nif (!window.iframePhone) {\n   if (!__WEBPACK_IMPORTED_MODULE_4__js_ext_iframe_phone_js__[\"default\"]) throw Error('Failed to load module \"iframePhone\".');\n   window.iframePhone = __WEBPACK_IMPORTED_MODULE_4__js_ext_iframe_phone_js__[\"default\"];\n}\nObject.defineProperty(__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].prototype, '$iframePhone', { value: window.iframePhone });\n\n\nwindow.logdataListener = new __WEBPACK_IMPORTED_MODULE_5__js_ext_iframe_logdata_listener_js__[\"a\" /* default */](window.iframePhone, function (logdata, callback) {\n   // eslint-disable-line no-unused-vars\n   logdata.application = 'CODAP';\n   logdata.activity = 'Ramp Game 2017 09';\n   // console.log (\"== main.js: posting logdata for mcbkt analysis: \" +\n   //             JSON.stringify (logdata))\n   __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__js_ext_mcbkt_client_js__[\"a\" /* default */])(logdata).then(function (data) {\n      // console.log (\"== main.js: received data from UKDE: \" + data)\n      var d = JSON.parse(data);\n      if (d.answer && window.mcbkt_fit_consumer) window.mcbkt_fit_consumer(d);\n   }, function () {}).catch(function () {});\n}, 'Real Time MCBKT', 0);\nObject.defineProperty(__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].prototype, '$logdataListener', { value: window.logdataListener });\n\n// >>>\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n   el: '#app',\n   router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n   template: '<App/>',\n   components: { App: __WEBPACK_IMPORTED_MODULE_1__App___default.a }\n});\n\n/***/ })\n\n},[76]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.72c59bdd81377741c495.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0df4abcc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./map_table_h.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./map_table_h.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0df4abcc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./map_table_h.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-0df4abcc\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/map_table_h.vue\n// module id = 137\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-44d0497c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./panel.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./panel.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-44d0497c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./panel.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-44d0497c\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/panel.vue\n// module id = 138\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('table', {\n    staticClass: \"table map_table_h\"\n  }, [_c('thead', [_c('tr', _vm._l((_vm.keys), function(key) {\n    return _c('th', [_vm._v(_vm._s('' + key))])\n  }))]), _vm._v(\" \"), _c('tbody', {\n    attrs: {\n      \"title\": _vm.body_tooltip\n    }\n  }, [_c('tr', _vm._l((_vm.vals), function(val) {\n    return _c('td', [_vm._v(_vm._s('' + val))])\n  }))])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-0df4abcc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/map_table_h.vue\n// module id = 139\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('div', {\n    attrs: {\n      \"id\": \"app-innerframe\"\n    }\n  }, [_c('router-view')], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-40f78640\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 140\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"mcbkt-panel\"\n  }, [_c('p', {\n    staticClass: \"explain_cluster\"\n  }, [_vm._v(_vm._s(_vm.body_tooltip_cur_plus))]), _vm._v(\" \"), _c('h1', [_vm._v(_vm._s(_vm._f(\"capitalize_all\")(_vm.heading)))]), _vm._v(\" \"), _c('h2', {\n    staticClass: \"curact\"\n  }, [_vm._v(\"Current \" + _vm._s(_vm._f(\"capitalize\")(_vm.unit_activity_type)))]), _vm._v(\" \"), _c('map_table_h', {\n    attrs: {\n      \"data\": _vm.curitems,\n      \"body_tooltip\": _vm.body_tooltip_cur\n    }\n  }), _vm._v(\" \"), _c('h2', {\n    staticClass: \"preact\"\n  }, [_vm._v(\"Previous \" + _vm._s(_vm._f(\"pluralize\")(_vm._f(\"capitalize\")(_vm.unit_activity_type))))]), _vm._v(\" \"), _c('map_table_h', {\n    attrs: {\n      \"data\": _vm.previtems\n    }\n  }), _vm._v(\" \"), _c('h2', {\n    staticClass: \"allact\"\n  }, [_vm._v(\"All \" + _vm._s(_vm._f(\"pluralize\")(_vm._f(\"capitalize\")(_vm.unit_activity_type))))]), _vm._v(\" \"), _c('map_table_h', {\n    attrs: {\n      \"data\": _vm.allitems\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-44d0497c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/panel.vue\n// module id = 141\n// module chunks = 1","/**\n * @file This module is for listening to log data generated by CODAP, do\n *    stuff on log data, and then possibly pushing the result back into CODAP\n *    log stream.\n *    <p><i>Thanks are due to Doug Martin and Jonathan Sandoe</i> for their\n *    code of DataflowGettingStarted data-interactive, which gave some\n *    initial guideline and some hints to the code of this file.</p>\n *\n * @copyright (c) 2017, Physics Front LLC (main@physicsfront.com)\n * @license <a href=\"https://www.apache.org/licenses/LICENSE-2.0\">\n *    Apache License, Version 2.0</a> (also, see file NOTICE).\n * @author Sam Gweon (Sam@physicsfront.com)\n * @version 0.1.0\n * @module iframe-logdata-listener\n */\n\"use strict\";export function IFrameLogDataListener(iframePhone,logdata_callback,title=\"Real Time MCBKT\",verbosity=0){if(typeof title!==\"string\")throw Error(\"** The value of title must be a string.\");title=title.trim();if(!title.length)throw Error(\"** The value of title cannot be an empty string.\");if(typeof logdata_callback!==\"function\")throw Error(\"** The value of logdata_callback must be a function.\");const client_id=title+\"--\"+(new Date).getTime()+\"--\"+Math.round(1e10*Math.random());const my_formatStr_prefix=client_id+\"::\";let last_codap_response=null;let state={title:title,version:\"0.1.0\",preventBringToFront:false,dimensions:{width:500,height:500}};const _destroy=()=>{_unregister_for_logdata();connection.disconnect()};const _err_msg_for_unhandled_codap_request=request=>'Handler not implemented for action \"'+request.action+'\" for CODAP request with resource \"'+request.resource+'\".';const _err_msg_for_unhandled_codap_response=request=>'Handler not implemented for CODAP response to request \"'+request.action+'\" with resource \"'+request.resource+'\".';const _get_codap_request_handler=resource=>{let handler=_request_handler_registry[resource];if(handler===undefined)handler=(()=>{throw Error(\"No handler for CODAP request \"+'with resource \"'+resource+'\".')});return handler};const _get_codap_response_handler=resource=>{let handler=_response_handler_registry[resource];if(handler===undefined)handler=(()=>{throw Error(\"No handler for \"+'CODAP response to request with resource \"'+resource+'\".')});return handler};const _register_for_logdata=()=>{this.send_request_to_codap({action:\"register\",resource:\"logMessageMonitor\",values:{clientId:client_id,message:\"*\"}})};const _request_handler_registry={interactiveState:request=>{switch(request.action){case\"get\":return state;default:throw Error(_err_msg_for_unhandled_codap_request(request))}},logMessageNotice:request=>{let json_data=request.values;switch(request.action){case\"notify\":if(json_data.formatStr.startsWith(my_formatStr_prefix)){if(verbosity>=1)console.log(\"== got boomeranged logdata: \"+JSON.stringify(json_data))}else{if(json_data.logMonitor&&client_id==json_data.logMonitor.clientId){delete json_data.logMonitor;json_data.iframe_logdata_client_id=client_id;json_data.time=(new Date).getTime()*.001;logdata_callback(json_data,logdata_report_callback)}}return{message:\"logdatum was received\"};default:throw Error(_err_msg_for_unhandled_codap_request(request))}}};const _response_handler_registry={interactiveFrame:(request,response)=>{switch(request.action){case\"get\":{let frame_data=response.values;this.set_state(frame_data);if(frame_data.savedState)this.set_state(frame_data.savedState,false)}return;default:throw Error(_err_msg_for_unhandled_codap_response(request))}},logMessage:request=>{switch(request.action){case\"notify\":if(verbosity>=1)console.log(\"log data were recevied well by CODAP---but \"+\"only formatStr and replaceArgs, I think.\");return;default:throw Error(_err_msg_for_unhandled_codap_response(request))}},logMessageMonitor:request=>{switch(request.action){case\"register\":if(verbosity>=1)console.log(\"== got register data: \"+JSON.stringify(request.values));return;default:throw Error(_err_msg_for_unhandled_codap_request(request))}}};const _unregister_for_logdata=()=>{this.send_request_to_codap({action:\"unregister\",resource:\"logMessageMonitor\",values:{clientId:client_id}})};const logdata_report_callback=report=>{if(report.formatStr==undefined)report.formatStr=title+\" report\";if(verbosity>=1)console.log(\"== pushing logdata to CODAP: \"+JSON.stringify(report));this.send_request_to_codap({action:\"notify\",resource:\"logMessage\",values:report})};this.handle_codap_request=((request,callback)=>{if(verbosity>=1)console.log(\"== handle_codap_request: \"+JSON.stringify(request));let success=false,values=null;try{values=_get_codap_request_handler(request.resource)(request);success=true}catch(error){console.log(\"** _get_codap_request_handler failed: \"+error.message)}callback({success:success,values:values})});this.handle_codap_response=((request,response)=>{if(verbosity>=1)console.log(\"== handle_codap_response: \"+JSON.stringify(response));last_codap_response=response;if(!response){console.log(\"** Request to CODAP seems to have gotten no response: \"+JSON.stringify(request))}else if(Array.isArray(response)){if(!Array.isArray(request))throw Error(\"Type mismatch between request (non-Array) and \"+\"response (Array).\");if(response.length!=request.length)throw Error(\"Length mismatch between request (\"+request.length+\") and response (\"+response.length+\").\");request.forEach((rq,i_rq)=>this.handle_codap_response(rq,response[i_rq]))}else if(response.success){if(verbosity>=1)console.log(\"== Request to CODAP succeeded: \"+JSON.stringify(request));try{_get_codap_response_handler(request.resource)(request,response)}catch(error){console.log(\"** _get_codap_response_handler failed: \"+error.message)}}else{const msg=\"** Request to CODAP failed: \"+JSON.stringify(request);console.log(msg);alert(msg)}});this.send_request_to_codap=((req,opts)=>{if(req.resource===\"logMessage\"&&req.action===\"notify\"){if(req.values!==undefined)req.values={};req.values.formatStr=my_formatStr_prefix+req.values.formatStr}connection.call(req,response=>this.handle_codap_response(req,response,opts))});this.set_state=((state_in,strict=true)=>{if(strict)for(const key in state){const val=state_in[key];if(val!==undefined)state[key]=val}else for(const key in state_in)state[key]=state_in[key]});this.update_iframe_with_state=(()=>{this.send_request_to_codap({action:\"update\",resource:\"interactiveFrame\",values:state})});const connection=new iframePhone.IframePhoneRpcEndpoint(this.handle_codap_request,\"data-interactive\",window.parent);this.send_request_to_codap({action:\"get\",resource:\"interactiveFrame\"});_register_for_logdata();window.unload=_destroy};export default IFrameLogDataListener;\n\n\n// WEBPACK FOOTER //\n// ./src/js-ext/iframe-logdata-listener.js","!function(e){\"object\"==typeof exports?module.exports=e():\"function\"==typeof define&&define.amd?define(e):\"undefined\"!=typeof window?window.iframePhone=e():\"undefined\"!=typeof global?global.iframePhone=e():\"undefined\"!=typeof self&&(self.iframePhone=e())}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar structuredClone = require('./structured-clone');\nvar HELLO_INTERVAL_LENGTH = 200;\nvar HELLO_TIMEOUT_LENGTH = 60000;\n\nfunction IFrameEndpoint() {\n  var listeners = {};\n  var isInitialized = false;\n  var connected = false;\n  var postMessageQueue = [];\n  var helloInterval;\n\n  function postToParent(message) {\n    // See http://dev.opera.com/articles/view/window-postmessage-messagechannel/#crossdoc\n    //     https://github.com/Modernizr/Modernizr/issues/388\n    //     http://jsfiddle.net/ryanseddon/uZTgD/2/\n    if (structuredClone.supported()) {\n      window.parent.postMessage(message, '*');\n    } else {\n      window.parent.postMessage(JSON.stringify(message), '*');\n    }\n  }\n\n  function post(type, content) {\n    var message;\n    // Message object can be constructed from 'type' and 'content' arguments or it can be passed\n    // as the first argument.\n    if (arguments.length === 1 && typeof type === 'object' && typeof type.type === 'string') {\n      message = type;\n    } else {\n      message = {\n        type: type,\n        content: content\n      };\n    }\n    if (connected) {\n      postToParent(message);\n    } else {\n      postMessageQueue.push(message);\n    }\n  }\n\n  function postHello() {\n    postToParent({\n      type: 'hello'\n    });\n  }\n\n  function addListener(type, fn) {\n    listeners[type] = fn;\n  }\n\n  function removeAllListeners() {\n    listeners = {};\n  }\n\n  function getListenerNames() {\n    return Object.keys(listeners);\n  }\n\n  function messageListener(message) {\n    // Anyone can send us a message. Only pay attention to messages from parent.\n    if (message.source !== window.parent) return;\n    var messageData = message.data;\n    if (typeof messageData === 'string') messageData = JSON.parse(messageData);\n\n    if (!connected && messageData.type === 'hello') {\n      connected = true;\n      stopPostingHello();\n      while (postMessageQueue.length > 0) {\n        post(postMessageQueue.shift());\n      }\n    }\n\n    if (connected && listeners[messageData.type]) {\n      listeners[messageData.type](messageData.content);\n    }\n  }\n\n  function disconnect() {\n    connected = false;\n    stopPostingHello();\n    window.removeEventListener('message', messsageListener);\n  }\n\n  /**\n    Initialize communication with the parent frame. This should not be called until the app's custom\n    listeners are registered (via our 'addListener' public method) because, once we open the\n    communication, the parent window may send any messages it may have queued. Messages for which\n    we don't have handlers will be silently ignored.\n  */\n  function initialize() {\n    if (isInitialized) {\n      return;\n    }\n    isInitialized = true;\n    if (window.parent === window) return;\n\n    // We kick off communication with the parent window by sending a \"hello\" message. Then we wait\n    // for a handshake (another \"hello\" message) from the parent window.\n    startPostingHello();\n    window.addEventListener('message', messageListener, false);\n  }\n\n  function startPostingHello() {\n    if (helloInterval) {\n      stopPostingHello();\n    }\n    helloInterval = window.setInterval(postHello, HELLO_INTERVAL_LENGTH);\n    window.setTimeout(stopPostingHello, HELLO_TIMEOUT_LENGTH);\n    // Post the first msg immediately.\n    postHello();\n  }\n\n  function stopPostingHello() {\n    window.clearInterval(helloInterval);\n    helloInterval = null;\n  }\n\n  // Public API.\n  return {\n    initialize: initialize,\n    getListenerNames: getListenerNames,\n    addListener: addListener,\n    removeAllListeners: removeAllListeners,\n    disconnect: disconnect,\n    post: post\n  };\n}\n\nvar instance = null;\n\n// IFrameEndpoint is a singleton, as iframe can't have multiple parents anyway.\nmodule.exports = function getIFrameEndpoint() {\n  if (!instance) {\n    instance = new IFrameEndpoint();\n  }\n  return instance;\n};\n\n},{\"./structured-clone\":4}],2:[function(require,module,exports){\nvar ParentEndpoint = require('./parent-endpoint');\nvar getIFrameEndpoint = require('./iframe-endpoint');\n\n// Not a real UUID as there's an RFC for that (needed for proper distributed computing).\n// But in this fairly parochial situation, we just need to be fairly sure to avoid repeats.\nfunction getPseudoUUID() {\n  var chars = 'abcdefghijklmnopqrstuvwxyz0123456789';\n  var len = chars.length;\n  var ret = [];\n\n  for (var i = 0; i < 10; i++) {\n    ret.push(chars[Math.floor(Math.random() * len)]);\n  }\n  return ret.join('');\n}\n\nmodule.exports = function IframePhoneRpcEndpoint(handler, namespace, targetWindow, targetOrigin, phone) {\n  var pendingCallbacks = Object.create({});\n\n  // if it's a non-null object, rather than a function, 'handler' is really an options object\n  if (handler && typeof handler === 'object') {\n    namespace = handler.namespace;\n    targetWindow = handler.targetWindow;\n    targetOrigin = handler.targetOrigin;\n    phone = handler.phone;\n    handler = handler.handler;\n  }\n\n  if (!phone) {\n    if (targetWindow === window.parent) {\n      phone = getIFrameEndpoint();\n      phone.initialize();\n    } else {\n      phone = new ParentEndpoint(targetWindow, targetOrigin);\n    }\n  }\n\n  phone.addListener(namespace, function (message) {\n    var callbackObj;\n\n    if (message.messageType === 'call' && typeof this.handler === 'function') {\n      this.handler.call(undefined, message.value, function (returnValue) {\n        phone.post(namespace, {\n          messageType: 'returnValue',\n          uuid: message.uuid,\n          value: returnValue\n        });\n      });\n    } else if (message.messageType === 'returnValue') {\n      callbackObj = pendingCallbacks[message.uuid];\n\n      if (callbackObj) {\n        window.clearTimeout(callbackObj.timeout);\n        if (callbackObj.callback) {\n          callbackObj.callback.call(undefined, message.value);\n        }\n        pendingCallbacks[message.uuid] = null;\n      }\n    }\n  }.bind(this));\n\n  function call(message, callback) {\n    var uuid = getPseudoUUID();\n\n    pendingCallbacks[uuid] = {\n      callback: callback,\n      timeout: window.setTimeout(function () {\n        if (callback) {\n          callback(undefined, new Error(\"IframePhone timed out waiting for reply\"));\n        }\n      }, 2000)\n    };\n\n    phone.post(namespace, {\n      messageType: 'call',\n      uuid: uuid,\n      value: message\n    });\n  }\n\n  function disconnect() {\n    phone.disconnect();\n  }\n\n  this.handler = handler;\n  this.call = call.bind(this);\n  this.disconnect = disconnect.bind(this);\n};\n\n},{\"./iframe-endpoint\":1,\"./parent-endpoint\":3}],3:[function(require,module,exports){\nvar structuredClone = require('./structured-clone');\n\n/**\n  Call as:\n    new ParentEndpoint(targetWindow, targetOrigin, afterConnectedCallback)\n      targetWindow is a WindowProxy object. (Messages will be sent to it)\n\n      targetOrigin is the origin of the targetWindow. (Messages will be restricted to this origin)\n\n      afterConnectedCallback is an optional callback function to be called when the connection is\n        established.\n\n  OR (less secure):\n    new ParentEndpoint(targetIframe, afterConnectedCallback)\n\n      targetIframe is a DOM object (HTMLIframeElement); messages will be sent to its contentWindow.\n\n      afterConnectedCallback is an optional callback function\n\n    In this latter case, targetOrigin will be inferred from the value of the src attribute of the\n    provided DOM object at the time of the constructor invocation. This is less secure because the\n    iframe might have been navigated to an unexpected domain before constructor invocation.\n\n  Note that it is important to specify the expected origin of the iframe's content to safeguard\n  against sending messages to an unexpected domain. This might happen if our iframe is navigated to\n  a third-party URL unexpectedly. Furthermore, having a reference to Window object (as in the first\n  form of the constructor) does not protect against sending a message to the wrong domain. The\n  window object is actualy a WindowProxy which transparently proxies the Window object of the\n  underlying iframe, so that when the iframe is navigated, the \"same\" WindowProxy now references a\n  completely differeent Window object, possibly controlled by a hostile domain.\n\n  See http://www.esdiscuss.org/topic/a-dom-use-case-that-can-t-be-emulated-with-direct-proxies for\n  more about this weird behavior of WindowProxies (the type returned by <iframe>.contentWindow).\n*/\n\nmodule.exports = function ParentEndpoint(targetWindowOrIframeEl, targetOrigin, afterConnectedCallback) {\n  var postMessageQueue = [];\n  var connected = false;\n  var handlers = {};\n  var targetWindowIsIframeElement;\n\n  function getIframeOrigin(iframe) {\n    return iframe.src.match(/(.*?\\/\\/.*?)\\//)[1];\n  }\n\n  function post(type, content) {\n    var message;\n    // Message object can be constructed from 'type' and 'content' arguments or it can be passed\n    // as the first argument.\n    if (arguments.length === 1 && typeof type === 'object' && typeof type.type === 'string') {\n      message = type;\n    } else {\n      message = {\n        type: type,\n        content: content\n      };\n    }\n    if (connected) {\n      var tWindow = getTargetWindow();\n      // if we are laready connected ... send the message\n      // See http://dev.opera.com/articles/view/window-postmessage-messagechannel/#crossdoc\n      //     https://github.com/Modernizr/Modernizr/issues/388\n      //     http://jsfiddle.net/ryanseddon/uZTgD/2/\n      if (structuredClone.supported()) {\n        tWindow.postMessage(message, targetOrigin);\n      } else {\n        tWindow.postMessage(JSON.stringify(message), targetOrigin);\n      }\n    } else {\n      // else queue up the messages to send after connection complete.\n      postMessageQueue.push(message);\n    }\n  }\n\n  function addListener(messageName, func) {\n    handlers[messageName] = func;\n  }\n\n  function removeListener(messageName) {\n    handlers[messageName] = null;\n  }\n\n  // Note that this function can't be used when IFrame element hasn't been added to DOM yet\n  // (.contentWindow would be null). At the moment risk is purely theoretical, as the parent endpoint\n  // only listens for an incoming 'hello' message and the first time we call this function\n  // is in #receiveMessage handler (so iframe had to be initialized before, as it could send 'hello').\n  // It would become important when we decide to refactor the way how communication is initialized.\n  function getTargetWindow() {\n    if (targetWindowIsIframeElement) {\n      var tWindow = targetWindowOrIframeEl.contentWindow;\n      if (!tWindow) {\n        throw \"IFrame element needs to be added to DOM before communication \" +\n              \"can be started (.contentWindow is not available)\";\n      }\n      return tWindow;\n    }\n    return targetWindowOrIframeEl;\n  }\n\n  function receiveMessage(message) {\n    var messageData;\n    if (message.source === getTargetWindow() && (targetOrigin === '*' || message.origin === targetOrigin)) {\n      messageData = message.data;\n      if (typeof messageData === 'string') {\n        messageData = JSON.parse(messageData);\n      }\n      if (handlers[messageData.type]) {\n        handlers[messageData.type](messageData.content);\n      } else {\n        console.log(\"cant handle type: \" + messageData.type);\n      }\n    }\n  }\n\n  function disconnect() {\n    connected = false;\n    window.removeEventListener('message', receiveMessage);\n  }\n\n  // handle the case that targetWindowOrIframeEl is actually an <iframe> rather than a Window(Proxy) object\n  // Note that if it *is* a WindowProxy, this probe will throw a SecurityException, but in that case\n  // we also don't need to do anything\n  try {\n    targetWindowIsIframeElement = targetWindowOrIframeEl.constructor === HTMLIFrameElement;\n  } catch (e) {\n    targetWindowIsIframeElement = false;\n  }\n\n  if (targetWindowIsIframeElement) {\n    // Infer the origin ONLY if the user did not supply an explicit origin, i.e., if the second\n    // argument is empty or is actually a callback (meaning it is supposed to be the\n    // afterConnectionCallback)\n    if (!targetOrigin || targetOrigin.constructor === Function) {\n      afterConnectedCallback = targetOrigin;\n      targetOrigin = getIframeOrigin(targetWindowOrIframeEl);\n    }\n  }\n\n  // Handle pages served through file:// protocol. Behaviour varies in different browsers. Safari sets origin\n  // to 'file://' and everything works fine, but Chrome and Safari set message.origin to null.\n  // Also, https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage says:\n  //  > Lastly, posting a message to a page at a file: URL currently requires that the targetOrigin argument be \"*\".\n  //  > file:// cannot be used as a security restriction; this restriction may be modified in the future.\n  // So, using '*' seems like the only possible solution.\n  if (targetOrigin === 'file://') {\n    targetOrigin = '*';\n  }\n\n  // when we receive 'hello':\n  addListener('hello', function () {\n    connected = true;\n\n    // send hello response\n    post({\n      type: 'hello',\n      // `origin` property isn't used by IframeEndpoint anymore (>= 1.2.0), but it's being sent to be\n      // backward compatible with old IframeEndpoint versions (< v1.2.0).\n      origin: window.location.href.match(/(.*?\\/\\/.*?)\\//)[1]\n    });\n\n    // give the user a chance to do things now that we are connected\n    // note that is will happen before any queued messages\n    if (afterConnectedCallback && typeof afterConnectedCallback === \"function\") {\n      afterConnectedCallback();\n    }\n\n    // Now send any messages that have been queued up ...\n    while (postMessageQueue.length > 0) {\n      post(postMessageQueue.shift());\n    }\n  });\n\n  window.addEventListener('message', receiveMessage, false);\n\n  // Public API.\n  return {\n    post: post,\n    addListener: addListener,\n    removeListener: removeListener,\n    disconnect: disconnect,\n    getTargetWindow: getTargetWindow,\n    targetOrigin: targetOrigin\n  };\n};\n\n},{\"./structured-clone\":4}],4:[function(require,module,exports){\nvar featureSupported = false;\n\n(function () {\n  var result = 0;\n\n  if (!!window.postMessage) {\n    try {\n      // Safari 5.1 will sometimes throw an exception and sometimes won't, lolwut?\n      // When it doesn't we capture the message event and check the\n      // internal [[Class]] property of the message being passed through.\n      // Safari will pass through DOM nodes as Null iOS safari on the other hand\n      // passes it through as DOMWindow, gotcha.\n      window.onmessage = function (e) {\n        var type = Object.prototype.toString.call(e.data);\n        result = (type.indexOf(\"Null\") != -1 || type.indexOf(\"DOMWindow\") != -1) ? 1 : 0;\n        featureSupported = {\n          'structuredClones': result\n        };\n      };\n      // Spec states you can't transmit DOM nodes and it will throw an error\n      // postMessage implimentations that support cloned data will throw.\n      window.postMessage(document.createElement(\"a\"), \"*\");\n    } catch (e) {\n      // BBOS6 throws but doesn't pass through the correct exception\n      // so check error message\n      result = (e.DATA_CLONE_ERR || e.message == \"Cannot post cyclic structures.\") ? 1 : 0;\n      featureSupported = {\n        'structuredClones': result\n      };\n    }\n  }\n}());\n\nexports.supported = function supported() {\n  return featureSupported && featureSupported.structuredClones > 0;\n};\n\n},{}],5:[function(require,module,exports){\nmodule.exports = {\n  /**\n   * Allows to communicate with an iframe.\n   */\n  ParentEndpoint:  require('./lib/parent-endpoint'),\n  /**\n   * Allows to communicate with a parent page.\n   * IFrameEndpoint is a singleton, as iframe can't have multiple parents anyway.\n   */\n  getIFrameEndpoint: require('./lib/iframe-endpoint'),\n  structuredClone: require('./lib/structured-clone'),\n\n  // TODO: May be misnamed\n  IframePhoneRpcEndpoint: require('./lib/iframe-phone-rpc-endpoint')\n\n};\n\n},{\"./lib/iframe-endpoint\":1,\"./lib/iframe-phone-rpc-endpoint\":2,\"./lib/parent-endpoint\":3,\"./lib/structured-clone\":4}]},{},[5])\n(5)\n});\n;\n\n\n// WEBPACK FOOTER //\n// ./src/js-ext/iframe-phone.js","/**\n * @file This module contains utility functions for accessing MCBKT engine of\n *    <a href=\"https://ukde.physicsfront.com\">UKDE by Physics Front</a>.\n * @copyright (c) 2017, Sam Gweon (Sam@physicsfront.com)\n * @license <a href=\"https://www.apache.org/licenses/LICENSE-2.0\">\n *    Apache License, Version 2.0</a> (also, see file NOTICE).\n * @author Sam Gweon (Sam@physicsfront.com)\n * @version 0.1.0\n * @module mcbkt-client\n */\n\"use strict\";function embedded_in_codap(){return true}export function ajax_as_promise(url,method=\"GET\",data,header){if(!embedded_in_codap())return;method=method.toUpperCase();return new Promise((resolve,reject)=>{const req=new XMLHttpRequest;req.open(method,url);req.onload=(()=>req.status===200?resolve(req.response):reject(Error(req.statusText)));req.onerror=(e=>reject(Error(`Network Error: ${e}`)));if(data){req.setRequestHeader(\"Content-Type\",\"application/json;charset=UTF-8\");data=JSON.stringify(data)}if(header!==undefined)for(const key in header)req.setRequestHeader(key,header[key]);req.send(data)})};export function post_scores_for_mcbkt_analysis(data,url=\"https://ukde.physicsfront.com/mcbkt/codapproxy_stub\",header){if(!embedded_in_codap())return;return ajax_as_promise(url,\"post\",data,header)};export function post_logdata_for_mcbkt_analysis(logdata,url=\"https://ukde.physicsfront.com/logdata/codapproxy_stub\",header){if(!embedded_in_codap())return;return ajax_as_promise(url,\"post\",logdata,header)};export default post_logdata_for_mcbkt_analysis;\n\n\n// WEBPACK FOOTER //\n// ./src/js-ext/mcbkt-client.js","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Panel from '@/components/panel'\n\nVue.use (Router)\n\nexport default new Router ({\n  routes: [\n    {\n      path: '/',\n      name: 'Panel',\n      component: Panel,\n      props: {\n         heading: '',\n         unit_activity_type: 'challenge'\n      }\n    },\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-40f78640\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-40f78640\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 72\n// module chunks = 1","<template>\n  <div id=\"app\">\n    <div id=\"app-innerframe\">\n      <router-view></router-view>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  created () {\n    //// var codap_phone = new iframePhone.IframePhoneRpcEndpoint ()\n  },\n  name: 'app'\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n#app-innerframe {\n  display: inline-block;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?18104566","<!-- <<< template block -->\n<template>\n  <table class=\"table map_table_h\">\n    <thead>\n      <tr>\n        <th v-for=\"key in keys\">{{ '' + key }}</th>\n      </tr>\n    </thead>\n    <tbody :title=\"body_tooltip\">\n      <tr>\n        <td v-for=\"val in vals\">{{ '' + val }}</td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n<!-- >>> template block -->\n<!-- <<< script block -->\n<script>\nexport default {\n  name: 'map_table_h',\n  props: {\n    data: {\n      type: null,\n      default: function () {\n        return [['key 1', 'value 1'], ['key 2', 'value 2'], ['k3']]\n      },\n      validator: function (val) {\n        if ( val [Symbol.iterator] == undefined ) {\n          console.log ('data must be an iterable.')\n          return false\n        }\n        // Detailed checkes on Set or Array data: deleted (unnecessary, I\n        // think) on 08-25-2017.\n        return true\n      },\n    },\n    body_tooltip: {\n      type: String,\n      default: ''\n    }\n  },\n  data () { return {} },\n  computed: {\n    map: function () {\n      return new Map (this.data)\n    },\n    keys: function () {\n      return Array.from (this.map.keys ()).map (x => '' + x)\n    },\n    vals: function () {\n      return Array.from (this.map.values ()).map (x=> '' + x)\n    },\n  },\n}\n</script>\n<!-- >>> script block -->\n<!-- <<< style block, scoped -->\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\ntable {\n  display: inline-block;\n  border-spacing: 0px 2px;\n}\n\nth, td {\n  padding: 2px 10px;\n  text-align: center;\n}\n\nth {\n  font-size: 120%;\n}\n\ntd {\n  font-size: 110%;\n}\n\nth:nth-child(even) {\n  background: #e5ebff;\n}\n\nth:nth-child(odd) {\n  background: #f1ece9;\n}\n\na {\n  color: #42b983;\n}\n</style>\n<!-- >>> style block, scoped -->\n\n\n\n// WEBPACK FOOTER //\n// map_table_h.vue?57575bb4","<!-- <<< template block -->\n<template>\n  <div class=\"mcbkt-panel\">\n    <p class=\"explain_cluster\">{{ body_tooltip_cur_plus }}</p>\n    <h1>{{ heading | capitalize_all }}</h1>\n    <h2 class='curact'>Current {{ unit_activity_type | capitalize }}</h2>\n    <map_table_h :data=\"curitems\" :body_tooltip=\"body_tooltip_cur\">\n    </map_table_h>\n    <h2 class='preact'>Previous {{ unit_activity_type | capitalize | pluralize }}</h2>\n    <map_table_h :data=\"previtems\"> </map_table_h>\n    <h2 class='allact'>All {{ unit_activity_type | capitalize | pluralize }}</h2>\n    <map_table_h :data=\"allitems\"> </map_table_h>\n  </div>\n</template>\n<!-- >>> template block -->\n<!-- <<< script block -->\n<script>\nimport Pluralize from 'pluralize'\nimport MapTableH from './map_table_h.vue'\n\nfunction _capitalize (val) {\n  return val.charAt (0).toUpperCase () + val.slice (1)\n}\n\nexport default {\n  name: 'mckbt-panel',\n  components: {\n    'map_table_h': MapTableH,\n  },\n  props: {\n    unit_activity_type: {\n      default: 'level',\n      type: String,\n    },\n    heading: {\n      default: 'Real time MCBKT',\n      type: String,\n    },\n    curitem_keys: {\n      default: function () {\n        return ['id', 'cluster', 'time', 'npts'] // 'passed?'\n      },\n      type: Array\n    },\n    allitems_keys: {\n      default: function () {\n        return ['time', 'npts']\n      },\n      type: Array\n    }\n  },\n  data () {\n    return {\n      all_data: [ // \"just for demo\": will be deleted on creation (see below)\n        {'id': 1, 'cluster': 'A', 'time': 30, 'npts': 5},\n        {'id': 2, 'cluster': 'B', 'time': 50, 'npts': 10},\n        {'id': 3, 'cluster': 'C', 'time': 100, 'npts': 10}\n      ]\n    }\n  },\n  computed: {\n    body_tooltip_cur: {\n      get: function () {\n        const d = this.all_data\n        if (! d) return ''\n        if (d.length)\n          return d [d.length - 1].tooltip || ''\n        return ''\n      },\n      set: function () {}\n    },\n    body_tooltip_cur_plus: {\n      get: function () {\n        const btc = this.body_tooltip_cur.trim ()\n        if (! btc.length) return ''\n        if (btc.startsWith ('A') || btc.startsWith ('B') ||\n              btc.startsWith ('E'))\n          return 'GREAT! Cluster ' + btc\n        else if (btc.startsWith ('C'))\n          return 'Good! Cluster ' + btc\n        else\n          return 'Cluster' + btc\n      },\n      set: function () {}\n    },\n    curitems: {\n      get: function () {\n        const d = this.all_data\n        const keys = this.curitem_keys\n        var ans = []\n        if (d.length) {\n          const m = d [d.length - 1]\n          for (const key of keys)\n            ans.push ([key, m [key] || ''])\n        } else {\n          for (const key of keys)\n            ans.push ([key, ''])\n        }\n        return ans\n      },\n      set: function () {}\n    },\n    previtems: {\n      get: function () {\n        const d = this.all_data\n        const keys = this.curitem_keys\n        var ans = []\n        for (const key of keys) {\n          let a = []\n          for (let i = 0; i < d.length - 1; i++)\n            a.push (d [i][key])\n          ans.push ([key + (key.endsWith ('s')?'': 's'), a])\n        }\n        return ans\n      },\n      set: function () {}\n    },\n    allitems: {\n      get: function () {\n        const d = this.all_data\n        const keys = this.allitems_keys\n        var ans = []\n        for (const key of keys) {\n          let s = 0\n          for (let i = 0; i < d.length; i++)\n            s += d [i][key]\n          ans.push ([key, s? s: \"\"])\n        }\n        return ans\n      },\n      set: function () {}\n    }\n  },\n  created () {\n    this.all_data = []\n    window.mcbkt_fit_consumer = data => {\n      const times = data.times || []\n      // console.log ('times = ' + JSON.stringify (times))\n      const cluster = data.cluster || ''\n      // console.log ('cluster = ' + cluster)\n      const reffv_list = data.reffv_list || []\n      // console.log ('reffv_list = ' + JSON.stringify (reffv_list))\n      // TODO: do a better job of timing?  3 is an estimated \"play time\"\n      const npts = times.length\n      // console.log ('npts = ' + npts)\n      const time = npts? Math.round (times [npts - 1] - times [0] + 3) : ''\n      // console.log ('time = ' + time)\n      const id = reffv_list.length? reffv_list [reffv_list.length - 1] : ''\n      // console.log ('id = ' + id)\n      // console.log ('this.all_data = ' + JSON.stringify (this.all_data))\n      let prev_reffv_list = []\n      for (const m of this.all_data)\n        prev_reffv_list.push (m.id)\n      // console.log ('prev_reffv_list = ' + JSON.stringify (prev_reffv_list))\n      const cluster_long = data.cluster_long || ''\n      const cluster_desc = data.cluster_description || ''\n      let tooltip = ''\n      if (cluster_long && cluster_desc)\n        tooltip = cluster_long + ' : ' + cluster_desc\n      let old_data\n      if (reffv_list.join (',') === prev_reffv_list.join (','))\n        old_data = this.all_data.slice (0, this.all_data.length - 1)\n      else\n        old_data = this.all_data\n      this.all_data = old_data.concat ({'id': id, 'cluster': cluster,\n          'time': time, 'npts': npts, 'tooltip': tooltip})\n    }\n  },\n  methods: {\n    // no methods have been found necessary just yet...\n    add_new_data () {\n    },\n    replace_last_data () {\n    },\n    unregister_logdata_listener () {\n    },\n    register_mcbkt_client (logdata_provider) {\n    },\n    unregister_mcbkt_client (logdata_provider) {\n    },\n  },\n  filters: {\n    capitalize: _capitalize,\n    pluralize: val => Pluralize (val, 10),\n    capitalize_all: val => val.split (\" \").map (_capitalize).join (\" \"),\n  }\n}\n</script>\n<!-- >>> script block -->\n<!-- <<< style block, scoped -->\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.mcbkt-panel {\n  font-size: 15px;\n}\n\nh1, h2 {\n  font-weight: normal;\n  -webkit-margin-before: 0.1em;\n  -webkit-margin-after: 0.1em;\n  margin-top: 0.1em;\n  margin-bottom: 0.1em;\n  padding-top: 0px;\n  padding-bottom: 0px;\n}\n\n.explain_cluster {\n  max-width: 330px;\n  padding: 10px;\n  background-color: #b4d497;\n  font-size: 1.2em;\n}\n\n.curact {\n  color: blue;\n}\n\n.preact {\n  color: tomato;\n}\n\n.allact {\n  color: purple;\n}\n\na {\n  color: #42b983;\n}\n</style>\n<!-- >>> style block, scoped -->\n\n\n\n// WEBPACK FOOTER //\n// panel.vue?031ead22","/**\n * @file This app is a data interactive plugin that mediates the MCBKT\n *    engine service to the CODAP data interactive such as Ramp Game.\n *\n * @copyright (c) 2017, Physics Front LLC (main@physicsfront.com)\n * @license <a href=\"https://www.apache.org/licenses/LICENSE-2.0\">\n *    Apache License, Version 2.0</a> (also, see file NOTICE).\n * @author Sam Gweon (Sam@physicsfront.com)\n * @version 0.1.0\n */\n\n\n\n// The entry point of webpack.\n//\n// The Vue build version to load with the `import` command (runtime-only or\n// standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nimport post_logdata_for_mcbkt from './js-ext/mcbkt-client.js'\n\n// <<< window.iframePhone, window.logdataListener\n\n//\n// Also, these two globals are made available as (Vue instance).$iframePhone\n// and (Vue instance).$logdataListener.  However, it remains to be seen how\n// Vue instance can be conveniently access in (or around) a single vue file\n// that defines a component (maybe Vue.extend is relevant?).\n\nimport iframe_phone_module from './js-ext/iframe-phone.js'\nif (! window.iframePhone) {\n   if (! iframe_phone_module)\n      throw Error ('Failed to load module \"iframePhone\".')\n   window.iframePhone = iframe_phone_module\n}\nObject.defineProperty (Vue.prototype, '$iframePhone',\n                       { value: window.iframePhone })\n\nimport logdata_listener from './js-ext/iframe-logdata-listener.js'\nwindow.logdataListener = new logdata_listener (window.iframePhone,\n   (logdata, callback) => { // eslint-disable-line no-unused-vars\n      logdata.application = 'CODAP'\n      logdata.activity = 'Ramp Game 2017 09'\n      // console.log (\"== main.js: posting logdata for mcbkt analysis: \" +\n      //             JSON.stringify (logdata))\n      post_logdata_for_mcbkt (logdata)\n      .then (\n         data => {\n            // console.log (\"== main.js: received data from UKDE: \" + data)\n            let d = JSON.parse (data)\n            if (d.answer && window.mcbkt_fit_consumer)\n               window.mcbkt_fit_consumer (d)\n         },\n         () => {}\n      )\n      .catch (() => {})\n   },\n   'Real Time MCBKT', 0)\nObject.defineProperty (Vue.prototype, '$logdataListener',\n                       { value: window.logdataListener })\n\n// >>>\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue ({\n   el : '#app',\n   router,\n   template : '<App/>',\n   components : { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}